(function(e){function t(t){for(var r,l,o=t[0],s=t[1],c=t[2],u=0,p=[];u<o.length;u++)l=o[u],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&p.push(n[l][0]),n[l]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);d&&d(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],r=!0,o=1;o<a.length;o++){var s=a[o];0!==n[s]&&(r=!1)}r&&(i.splice(t--,1),e=l(l.s=a[0]))}return e}var r={},n={app:0},i=[];function l(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=r,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)l.d(a,r,function(t){return e[t]}.bind(null,r));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],s=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"078a":function(e,t,a){"use strict";a("0db3")},"0839":function(e,t,a){"use strict";a("76fc")},"0db3":function(e,t,a){},1:function(e,t){},"2df8":function(e,t,a){"use strict";a("b5a6")},"36eb":function(e,t,a){},3976:function(e,t,a){},"3ae1":function(e,t,a){},"3b4b":function(e,t,a){"use strict";a("36eb")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("ac1f"),a("1276"),a("d3b7");var r=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.isRouterAlive?a("router-view"):e._e()],1)},i=[],l={provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}},o=l,s=a("2877"),c=Object(s["a"])(o,n,i,!1,null,null,null),d=c.exports,u=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{attrs:{width:"500px"}},[a("el-card",{attrs:{shadow:"always"}},[a("h5",{staticStyle:{margin:"0",display:"inline",width:"50px"}},[e._v(" 输入文本 ")]),a("el-divider",{staticStyle:{margin:"15px"},attrs:{"content-position":"left"}}),a("el-input",{staticClass:"textinput",attrs:{type:"textarea",rows:3,placeholder:"请输入待生成知识图谱的文本内容"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),a("el-button",{attrs:{type:"primary",plain:""}},[e._v(" 确认生成 ")])],1)],1)],1)},m=[],f={data:function(){return{textarea:""}}},h=f,g=(a("82c3"),Object(s["a"])(h,p,m,!1,null,"41b39c66",null)),_=g.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",{staticStyle:{"background-color":"white"}},[a("span",{staticClass:"el-icon-kg"},[e._v(" ")]),a("span",{staticStyle:{color:"#409EFF","font-size":"25px"}},[e._v(" 工业知识图谱构建与管理系统")]),a("div",{staticClass:"demo-basic--circle"},[a("div",{staticClass:"block",on:{click:function(t){return e.logout()}}},[a("el-link",{attrs:{underline:!1,icon:"el-icon-user-solid"}},[e._v("注销")])],1)])]),a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("div",{staticStyle:{"background-color":"#fff",height:"800px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"white","text-color":"black","active-text-color":"#ffd04b"}},[e._l(e.menuList,(function(t){return a("el-submenu",{key:t.id,attrs:{index:t.id}},[a("template",{slot:"title"},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.menuName))])]),e._l(t.children,(function(t){return a("el-menu-item",{key:t.subID,attrs:{"unique-opened":!0},on:{click:function(a){return e.show(t.option)}}},[a("template",{slot:"title"},[a("i",{class:t.subIcon}),a("span",[e._v(e._s(t.subName))])])],2)}))],2)})),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[a("el-link",{attrs:{href:"http://39.100.48.36/KGQAindex.html",underline:!1}},[a("i",{staticClass:"el-icon-search"}),a("span",[e._v("智能检索")])])],1)],2),a("el-submenu",{attrs:{index:"6"}},[a("template",{slot:"title"},[a("el-link",{attrs:{href:" http://39.100.48.36/index_product.html",underline:!1}},[a("i",{staticClass:"el-icon-star-on"}),a("span",[e._v("创新应用")])])],1)],2),a("el-submenu",{attrs:{index:"7"}},[a("template",{slot:"title"},[a("el-link",{attrs:{href:" http://39.100.48.36/qa_product.html",underline:!1}},[a("i",{staticClass:"el-icon-chat-line-round"}),a("span",[e._v("智能问答")])])],1)],2)],2)],1)]),a("el-main",{staticStyle:{height:"100%"}},["generate_graph"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"generate_graph"}}):e._e(),"my_project"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"my_project"}}):e._e(),"fusion_project"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"fusion_project"}}):e._e(),"my_graph"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"my_graph"}}):e._e(),"mydomain"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"mydomain"}}):e._e(),"myrawdata"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"myRawdata"}}):e._e(),"myTripleData"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"myTripleData"}}):e._e(),"mymodel"==e.opt&&e.isRouterAlive?a("router-view",{attrs:{name:"mymodel"}}):e._e()],1)],1)],1)},w=[],v=a("1da1"),y=(a("96cf"),{provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0,isCollapse:!0,circleUrl:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png",opt:"",menuList:[{id:"1",menuName:"我的项目",icon:"el-icon-s-promotion",children:[{subID:"1",subName:"融合项目",subIcon:"el-icon-edit",option:"my_project"}]},{id:"2",menuName:"我的数据",icon:"el-icon-coin",children:[{subID:"1",subName:"文本数据",subIcon:"el-icon-s-grid",option:"myrawdata"},{subID:"2",subName:"三元组数据",subIcon:"el-icon-s-data",option:"myTripleData"}]},{id:"3",menuName:"我的图谱",icon:"el-icon-share",children:[{subID:"1",subName:"构建图谱",subIcon:"el-icon-magic-stick",option:"generate_graph"},{subID:"2",subName:"图谱管理",subIcon:"el-icon-picture",option:"my_graph"},{subID:"3",subName:"领域管理",subIcon:"el-icon-s-home",option:"mydomain"}]},{id:"4",menuName:"我的模型",icon:"el-icon-help",children:[{subID:"1",subName:"模型管理",subIcon:"el-icon-s-opportunity",option:"mymodel"}]}],graph_list:[]}},methods:{show:function(e){this.opt=e,console.log(this.opt)},logout:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.delete("session");case 2:a=t.sent,console.log(a),e.$router.push("/login");case 5:case"end":return t.stop()}}),t)})))()},reload:function(){this.isRouterAlive=!1,this.$nextTick((function(){this.isRouterAlive=!0}))}}}),x=y,k=(a("2df8"),Object(s["a"])(x,b,w,!1,null,"6db350ae",null)),j=k.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-aside",{staticClass:"originKG",attrs:{width:"100%",height:"100%"}},[a("el-card",{attrs:{shadow:"always"}},[a("h5",{staticStyle:{margin:"0",display:"inline",width:"50px"}},[e._v(" 知识图谱融合预览 ")]),a("el-divider",{staticStyle:{margin:"10px"},attrs:{"content-position":"left"}}),a("div",{staticClass:"block"},[a("el-image",{staticStyle:{width:"40%",height:"50%","margin-left":"30%"},attrs:{src:e.src}})],1),a("h5",{staticStyle:{color:"#800000"}},[e._v(" 提示：新增4个实体，对应3种关系 ")]),a("h4",{staticStyle:{float:"left",margin:"0"}},[e._v(" 显示层数： ")]),a("el-input-number",{staticStyle:{float:"left"},attrs:{size:"mini"},model:{value:e.num1,callback:function(t){e.num1=t},expression:"num1"}}),a("h4",{staticStyle:{float:"left",margin:"0","margin-left":"30px"}},[e._v(" 显示条数： ")]),a("el-input-number",{staticStyle:{float:"left"},attrs:{size:"mini"},model:{value:e.num2,callback:function(t){e.num2=t},expression:"num2"}}),a("el-button",{attrs:{type:"primary",plain:""}},[e._v(" 确认融合 ")])],1)],1)],1)},D=[],$={data:function(){return{src:"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",num1:1,num2:10}}},V=$,R=(a("7220"),Object(s["a"])(V,S,D,!1,null,"1a026fb0",null)),C=R.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"0"}},[a("h4",{staticStyle:{"margin-top":"5px","margin-bottom":"10px"}},[e._v(" 请输入您想搜索的实体: ")]),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.entity.entity_name,callback:function(t){e.$set(e.entity,"entity_name",t)},expression:"entity.entity_name"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getEntity},slot:"append"})],1)],1)},O=[],E={data:function(){return{entity:{entity_name:"深度学习"}}},created:function(){this.getEntity()},methods:{getEntity:function(){var e=this.$http.post("get_entity",this.entity);console.log(e)}}},P=E,F=(a("7572"),Object(s["a"])(P,L,O,!1,null,null,null)),T=F.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h4",{staticStyle:{"margin-bottom":"10px"}},[e._v(" 实体列表: ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"500",border:""}},[a("el-table-column",{attrs:{prop:"entityName",label:"实体名称",width:"190"}})],1)],1)},z=[],N={data:function(){return{tableData:[{entityName:"深度学习"},{entityName:"深度学习算法"},{entityName:"深度学习框架"},{entityName:"DL"},{entityName:"deep learning"},{entityName:"深度学习算法"},{entityName:"深度学习算法"},{entityName:"深度学习算法"},{entityName:"深度学习算法"},{entityName:"深度学习算法"}]}}},G=N,W=Object(s["a"])(G,B,z,!1,null,"352ab3a2",null),A=W.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login_container"},[a("div",{staticClass:"login_box"},[e._m(0),a("el-form",{ref:"loginFormRef",staticClass:"loginForm",attrs:{"label-width":"80px",rules:e.loginFormRules,model:e.loginForm}},[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{model:{value:e.loginForm.mobile,callback:function(t){e.$set(e.loginForm,"mobile",t)},expression:"loginForm.mobile"}})],1),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{type:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v(" 登录 ")]),a("el-button",{attrs:{type:"info"},on:{click:e.resetLoginForm}},[e._v(" 重置 ")])],1)],1),a("el-link",{staticStyle:{"margin-top":"20px","margin-right":"10px"},attrs:{type:"info"},on:{click:function(t){return e.goto("/register")}}},[e._v(" 账号注册 ")]),a("el-link",{staticStyle:{"margin-top":"20px","margin-right":"10px"},attrs:{type:"info"},on:{click:function(t){return e.goto("/demo")}}},[e._v(" 演示入口 ")])],1),e.error_1?a("el-alert",{attrs:{title:"登录失败",type:"error",description:"用户名或密码错误！","show-icon":""}}):e._e(),e.error_2?a("el-alert",{attrs:{title:"登录失败",type:"error",description:"手机号码格式不正确！","show-icon":""}}):e._e()],1)},M=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"avatar_box"},[r("img",{attrs:{src:a("6f58"),alt:""}})])}],q=(a("5319"),{data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入手机号")):e.isCellPhone(a)?r():r(new Error("请输入正确的手机号!"))},a=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.registerForm.password2&&e.$refs.registerFormRef.validateField("checkPass"),r())};return{loginForm:{mobile:"admin",password:"123456"},loginFormRules:{mobile:[{required:!0,validator:t,trigger:"blur"}],password:[{required:!0,validator:a,trigger:"blur"}]},error_1:!1,error_2:!1}},methods:{resetLoginForm:function(){this.$refs.loginFormRef.resetFields()},isCellPhone:function(e){return!!/^1(3|4|5|6|7|8)\d{9}$/.test(e)},login:function(){var e=this;this.$refs.loginFormRef.validate(function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("session",e.loginForm);case 4:r=t.sent,console.log(r),200!==r.status||("4004"===r.data.errno?e.error_1=!0:"4103"===r.data.errno?e.error_2=!0:(console.log("success"),e.success=!0,e.$router.push("/home")));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},goto:function(e){this.$router.replace(e)}}}),U=q,J=(a("078a"),Object(s["a"])(U,I,M,!1,null,"97e59cc0",null)),K=J.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login_container"},[a("div",{staticClass:"login_box"},[e._m(0),a("el-form",{ref:"registerFormRef",staticClass:"loginForm",attrs:{"label-width":"80px",rules:e.registerFormRules,model:e.registerForm}},[a("el-form-item",{attrs:{label:"手机号",prop:"mobile"}},[a("el-input",{model:{value:e.registerForm.mobile,callback:function(t){e.$set(e.registerForm,"mobile",t)},expression:"registerForm.mobile"}})],1),a("el-form-item",{attrs:{label:"用户名",prop:"name"}},[a("el-input",{model:{value:e.registerForm.name,callback:function(t){e.$set(e.registerForm,"name",t)},expression:"registerForm.name"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}})],1),a("el-form-item",{attrs:{label:"密码确认",prop:"password2"}},[a("el-input",{attrs:{type:"password"},model:{value:e.registerForm.password2,callback:function(t){e.$set(e.registerForm,"password2",t)},expression:"registerForm.password2"}})],1),a("el-form-item",{staticClass:"btns"},[a("el-button",{attrs:{type:"primary"},on:{click:e.register}},[e._v(" 注册 ")]),a("el-button",{attrs:{type:"info"},on:{click:e.resetRegisterForm}},[e._v(" 重置 ")])],1)],1)],1)])},H=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"avatar_box"},[r("img",{attrs:{src:a("6f58"),alt:""}})])}],Y={data:function(){var e=this,t=function(t,a,r){""===a?r(new Error("请输入手机号")):e.isCellPhone(a)?r():r(new Error("请输入正确的手机号!"))},a=function(t,a,r){""===a?r(new Error("请输入密码")):(""!==e.registerForm.password2&&e.$refs.registerFormRef.validateField("checkPass"),r())},r=function(t,a,r){""===a?r(new Error("请再次输入密码")):a!==e.registerForm.password?r(new Error("两次输入密码不一致!")):r()};return{registerForm:{mobile:"",name:"",password:"",password2:""},registerFormRules:{mobile:[{required:!0,validator:t,trigger:"blur"}],name:[{required:!0,message:"请输入用户名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10 个字符",trigger:"blur"}],password:[{required:!0,validator:a,trigger:"blur"}],password2:[{required:!0,validator:r,trigger:"blur"}]}}},methods:{resetRegisterForm:function(){this.$refs.registerFormRef.resetFields()},isCellPhone:function(e){return!!/^1(3|4|5|6|7|8)\d{9}$/.test(e)},register:function(){var e=this;this.$refs.registerFormRef.validate(function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(a){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users",e.registerForm);case 4:r=t.sent,console.log(r),e.$router.replace("/home");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}},X=Y,Z=(a("3b4b"),Object(s["a"])(X,Q,H,!1,null,"d8d252de",null)),ee=Z.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-card",{staticStyle:{width:"100%",height:"100%"}},[a("el-divider",{staticStyle:{"margin-bottom":"20px"},attrs:{"content-position":"left"}},[e._v("知识图谱构建")]),a("el-form",{ref:"form",staticStyle:{width:"30%",margin:"0 auto"},attrs:{model:e.newGraph,"label-width":"120px"}},[a("el-form-item",{staticStyle:{width:"91%"},attrs:{label:"图谱名称"}},[a("el-input",{model:{value:e.newGraph.name,callback:function(t){e.$set(e.newGraph,"name",t)},expression:"newGraph.name"}})],1),a("el-form-item",{staticStyle:{width:"91%"},attrs:{label:"头节点类型"}},[a("el-input",{model:{value:e.newGraph.e1_type,callback:function(t){e.$set(e.newGraph,"e1_type",t)},expression:"newGraph.e1_type"}})],1),a("el-form-item",{staticStyle:{width:"91%"},attrs:{label:"尾节点类型"}},[a("el-input",{model:{value:e.newGraph.e2_type,callback:function(t){e.$set(e.newGraph,"e2_type",t)},expression:"newGraph.e2_type"}})],1),a("el-form-item",{staticStyle:{width:"91%"},attrs:{label:"关系类型"}},[a("el-input",{model:{value:e.newGraph.relation_type,callback:function(t){e.$set(e.newGraph,"relation_type",t)},expression:"newGraph.relation_type"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add_graph()}}},[e._v("立即构建")])],1)],1)],1)],1)])},ae=[],re={created:function(){this.getMyDomainList()},data:function(){return{triple_data_list:[],domain_list:[],newGraph:{},new_graph:"",totalPage:""}},methods:{getDomainList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("domain");case 2:a=t.sent,e.domain_list=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},getTripledataList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("data?dtype=data");case 2:a=t.sent,r=a.data,console.log(r.data),e.triple_data_list=r.data,e.totalPage=r.data.length;case 7:case"end":return t.stop()}}),t)})))()},add_graph:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e.newGraph),t.next=4,e.$http.post("graph/",e.newGraph);case 4:a=t.sent,a.data,e.$message({showClose:!0,message:"添加知识图谱成功！",type:"success"}),e.addDialogVisible=!1,t.next=13;break;case 10:t.prev=10,t.t0=t["catch"](0),e.$message({showClose:!0,message:"添加知识图谱失败",type:"error"});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})))()},getMyDomainList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("domain");case 2:a=t.sent,r=a.data,e.domain_list=r.data;case 5:case"end":return t.stop()}}),t)})))()}}},ne=re,ie=Object(s["a"])(ne,te,ae,!1,null,null,null),le=ie.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",["projectList"==e.opt?a("div",[a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"30px"}},[a("el-button",{staticStyle:{"margin-left":"20px","margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addDialogVisible=!0}}}),e._v("创建新标注项目 ")],1),e._l(e.projectList,(function(t){return a("el-col",{key:t.project_id,attrs:{span:4.5,offset:0}},[a("div",[a("el-card",{staticClass:"box-card",staticStyle:{height:"80%"},attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},on:{click:function(a){return e.projectDetail(t.project_id,t.project_name)}},slot:"header"},[a("span",[e._v(e._s(t.project_name))])]),a("el-button",{staticStyle:{float:"left",color:"#606266"},attrs:{type:"text"},on:{click:function(a){e.opt="projectList",e.project_id=t.project_id,e.updateDialogVisible=!0}}},[e._v("编辑 ")]),a("el-button",{staticStyle:{float:"right",color:"#F56C6C"},attrs:{type:"text"},on:{click:function(a){e.opt="projectList",e.project_id=t.project_id,e.deleteDialogVisible=!0}}},[e._v("删除 ")])],1)],1)])})),a("el-dialog",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{title:"新增标注项目",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{attrs:{model:e.newAnnotationProject}},[a("el-form-item",{attrs:{label:"项目名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAnnotationProject.name,callback:function(t){e.$set(e.newAnnotationProject,"name",t)},expression:"newAnnotationProject.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addAnnotationProject}},[e._v("确 定")])],1)],1)],2):e._e(),a("el-dialog",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{title:"重命名",visible:e.updateDialogVisible},on:{"update:visible":function(t){e.updateDialogVisible=t}}},[a("el-form",{attrs:{model:e.rename}},[a("el-form-item",{attrs:{label:"输入新名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rename.name,callback:function(t){e.$set(e.rename,"name",t)},expression:"rename.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.renameProject}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确认删除该项目？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteProject(e.project_id)}}},[e._v("确 定")])],1)]),"projectDetail"==e.opt?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-card",{staticStyle:{width:"100%",height:"65px"},attrs:{shadow:"never"}},[a("el-page-header",{staticStyle:{float:"left"},attrs:{content:e.project_name+" 项目详情"},on:{back:function(t){return e.goBack()}}})],1),a("div",{staticStyle:{width:"100%","margin-top":"5px"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"标注项目"}},[a("el-divider",[a("i",{staticClass:"el-icon-s-flag"})]),a("el-form",[a("el-form-item",{attrs:{label:"文本内容"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.raw_text,callback:function(t){e.raw_text=t},expression:"raw_text"}})],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.start_annotate()}}},[e._v("开始标注")]),1==e.tripledataVisible?a("div",{staticStyle:{width:"90%"}},[a("div",{staticStyle:{"margin-left":"20px","margin-bottom":"10px"}},[a("span",{staticStyle:{color:"#409EFF"}},[a("i",{staticClass:"el-icon-s-data"}),e._v(" 三元组数据")])]),a("el-table",{ref:"filterTable",staticStyle:{width:"95%","margin-left":"2%"},attrs:{border:"",data:e.new_tripledata,"max-height":"600"}},[a("el-table-column",{attrs:{fixed:"left",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"e1_type",label:"头节点类型",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"e1",label:"头节点名",width:"180"}}),a("el-table-column",{attrs:{prop:"relation_type",label:"关系",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v(e._s(t.row.relation_type))])]}}],null,!1,2485226660)}),a("el-table-column",{attrs:{prop:"e2_type",label:"尾节点类型",width:"180"}}),a("el-table-column",{attrs:{prop:"e2",label:"尾节点名",width:"180"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.fusiondialog=!0,e.a_tripledata=t.row}}},[e._v("融合入图")])]}}],null,!1,1317590762)})],1)],1):e._e(),a("el-dialog",{attrs:{title:"确定融合？",visible:e.fusiondialog},on:{"update:visible":function(t){e.fusiondialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"选择图谱：","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"所有图谱",clearable:""},on:{change:e.get_my_graph_list,clear:e.get_my_graph_list},model:{value:e.graph_id,callback:function(t){e.graph_id=t},expression:"graph_id"}},e._l(e.graph_list,(function(e){return a("el-option",{key:e.graph_id,attrs:{label:e.graph_name,value:e.graph_id}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.fusiondialog=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.fusion()}}},[e._v(" 确 定 ")])],1)],1)],1)],1)],1)],1):e._e()],1)},se=[],ce=a("313e"),de={inject:["reload"],created:function(){this.getProjectList(),this.project_task={},this.getRawdataList(),this.getModelList(),this.get_my_graph_list()},data:function(){return{projectList:[],rawdata_list:[],graph_list:[],raw_text:"",graph_id:"",modelList:[{model_id:1,model_name:"三元组抽取"}],currentDate:new Date,addDialogVisible:!1,fusiondialog:!1,formLabelWidth:"100px",opt:"projectList",project_id:0,project_name:"",rename:{name:""},newAnnotationProject:{name:"",type_id:0},textarea:"",num1:1,num2:10,src:"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",child_graph_data:[],childTableVisible:!1,deleteDialogVisible:!1,updateDialogVisible:!1,newTripledataVisible:!1,drawer:!1,label_op:"DB",anotation:{data:"",model:""},tripledataVisible:!1,project_task:{},task:{task_id:"",task_state:{}},task_state:{},new_tripledata:{name:"",private:!0,result:{}},a_tripledata:{e1_type:"",e2_type:"",e1:"",e2:"",relation_type:""},newVertex:{name:""},new_edge:{from:"",to:"",attribute:{}}}},methods:{getProjectList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("project?type=annotation");case 2:a=t.sent,e.projectList=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},get_my_graph_list:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(e),void 0!=e){a.next=7;break}return a.next=4,t.$http.get("/graph/");case 4:r=a.sent,a.next=10;break;case 7:return a.next=9,t.$http.get("/graph?domain="+e);case 9:r=a.sent;case 10:t.graph_list=r.data.data;case 11:case"end":return a.stop()}}),a)})))()},getRawdataList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("data?dtype=text");case 2:a=t.sent,r=a.data,e.rawdata_list=r.data;case 5:case"end":return t.stop()}}),t)})))()},getModelList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("model");case 2:a=t.sent,r=a.data,e.modelList=r.data;case 5:case"end":return t.stop()}}),t)})))()},addAnnotationProject:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("project",e.newAnnotationProject);case 3:t.sent,e.$message({showClose:!0,message:"创建标注项目成功！",type:"success"}),e.addDialogVisible=!1,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({showClose:!0,message:"该项目已存在！",type:"error"}),e.addDialogVisible=!1;case 12:e.reload();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},renameProject:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.rename),t.prev=1,t.next=4,e.$http.patch("project/"+e.project_id,e.rename);case 4:t.sent,e.$message({showClose:!0,message:"成功！",type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$message({showClose:!0,message:"出现异常！",type:"error"});case 11:e.updateDialogVisible=!1,e.reload();case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},goBack:function(){this.opt="projectList",this.anotation={data:"",model:""},this.tripledataVisible=!1,this.task={task_id:"",task_state:{}}},projectDetail:function(e,t){this.project_id=e,this.project_name=t,this.opt="projectDetail",this.task.task_id=this.project_task[e],this.task.task_id&&(this.getTaskState(),"SUCCESS"==this.task.task_state.state?this.tripledataVisible=!0:this.tripledataVisible=!1)},deleteProject:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.delete("project/"+e);case 3:a.sent,t.$message({showClose:!0,message:"删除项目成功！",type:"success"}),t.deleteDialogVisible=!1,t.reload(),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),t.$message({showClose:!0,message:"出现异常！",type:"error"}),t.deleteDialogVisible=!1;case 13:t.reload();case 14:case"end":return a.stop()}}),a,null,[[0,9]])})))()},start_annotate:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("http://39.100.48.36:3012/predict_re?sentence="+e.raw_text);case 3:a=t.sent,r=a.data,console.log(r),e.$message({showClose:!0,message:"开始标注！",type:"success"}),console.log(r.relations),e.tripledataVisible=!0,e.new_tripledata=r.relations,t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](0),e.$message({showClose:!0,message:"出现异常！",type:"error"});case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},fusion:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={e1_type:e.a_tripledata.e1_type,e2_type:e.a_tripledata.e2_type,e1:e.a_tripledata.e1,e2:e.a_tripledata.e2,relation_type:e.a_tripledata.relation_type},t.prev=1,t.next=4,e.$http.post("/graph/"+e.graph_id+"/insert_triplet",a);case 4:r=t.sent,r.data,e.$message({showClose:!0,message:"成功！",type:"success"}),e.fusiondialog=!1,t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),e.$message({showClose:!0,message:"成功！",type:"success"}),e.fusiondialog=!1;case 14:console.log(res.data);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})))()},fusion_1:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={e1_type:e.a_tripledata.e1_type,e2_type:e.a_tripledata.e2_type,e1:e.a_tripledata.e1,e2:e.a_tripledata.e2,relation_type:e.a_tripledata.relation_type},t.prev=1,t.next=4,e.$http.post("/graph/"+e.graph_id+"/insert_triplet",a);case 4:r=t.sent,r.data,e.$message({showClose:!0,message:"成功！",type:"success"}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](1),e.$message({showClose:!0,message:"error!",type:"error"});case 12:console.log(res.data),e.fusiondialog=!1;case 14:case"end":return t.stop()}}),t,null,[[1,9]])})))()},addVertexType:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={name:e},a.prev=1,a.next=4,t.$http.post("graph/"+t.graph_id+"/vertex",r);case 4:a.sent,t.$message({showClose:!0,message:"成功！",type:"success"}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),t.$message({showClose:!0,message:"error!",type:"error"});case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))()},addNode:function(e,t){var a=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n={name:t},r.prev=1,r.next=4,a.$http.post("27/graph/"+a.graph_id+"/vertex/"+e,n);case 4:r.sent,a.$message({showClose:!0,message:"成功！",type:"success"}),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),a.$message({showClose:!0,message:"error!",type:"error"});case 11:a.addVertexVisible=!1;case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},addEdge:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return new_edge={from:t.newEdge.node_id,to:t.vertex._id,attribute:{}},a.prev=1,a.next=4,t.$http.post(t.domain_id+"/graph/"+t.graph_id+"/edge/"+e,new_edge);case 4:a.sent,t.$message({showClose:!0,message:"添加新节点成功！",type:"success"}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),t.$message({showClose:!0,message:"添加失败！",type:"error"});case 11:t.addNewEdgeVisible=!1,t.showEditGraph("1");case 13:case"end":return a.stop()}}),a,null,[[1,8]])})))()},report:function(){this.tripledataVisible=!0},saveTripleData:function(){this.$message({showClose:!0,message:"暂存三元组数据成功！",type:"success"}),this.newTripledataVisible=!1}}},ue=de,pe=(a("a1db"),Object(s["a"])(ue,oe,se,!1,null,null,null)),me=pe.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",["projectList"==e.opt?a("div",[a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"30px"}},[a("el-button",{staticStyle:{"margin-left":"20px","margin-right":"20px"},attrs:{type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addDialogVisible=!0}}}),e._v("创建新标注项目 ")],1),e._l(e.projectList,(function(t){return a("el-col",{key:t.project_id,attrs:{span:4.5,offset:0}},[a("div",[a("el-card",{staticClass:"box-card",staticStyle:{height:"80%"},attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},on:{click:function(a){return e.projectDetail(t.project_id,t.project_name)}},slot:"header"},[a("span",[e._v(e._s(t.project_name))])]),a("el-button",{staticStyle:{float:"left",color:"#606266"},attrs:{type:"text"},on:{click:function(a){e.opt="projectList",e.project_id=t.project_id,e.updateDialogVisible=!0}}},[e._v("编辑 ")]),a("el-button",{staticStyle:{float:"right",color:"#F56C6C"},attrs:{type:"text"},on:{click:function(a){e.opt="projectList",e.project_id=t.project_id,e.deleteDialogVisible=!0}}},[e._v("删除 ")])],1)],1)])})),a("el-dialog",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{title:"新增标注项目",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{attrs:{model:e.newAnnotationProject}},[a("el-form-item",{attrs:{label:"项目名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newAnnotationProject.name,callback:function(t){e.$set(e.newAnnotationProject,"name",t)},expression:"newAnnotationProject.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addAnnotationProject}},[e._v("确 定")])],1)],1)],2):e._e(),a("el-dialog",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{title:"重命名",visible:e.updateDialogVisible},on:{"update:visible":function(t){e.updateDialogVisible=t}}},[a("el-form",{attrs:{model:e.rename}},[a("el-form-item",{attrs:{label:"输入新名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rename.name,callback:function(t){e.$set(e.rename,"name",t)},expression:"rename.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updateDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.renameProject}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确认删除该项目？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteProject(e.project_id)}}},[e._v("确 定")])],1)]),"projectDetail"==e.opt?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-card",{staticStyle:{width:"100%",height:"65px"},attrs:{shadow:"never"}},[a("el-page-header",{staticStyle:{float:"left"},attrs:{content:e.project_name+" 项目详情"},on:{back:function(t){return e.goBack()}}})],1),a("div",{staticStyle:{width:"100%","margin-top":"5px"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"标注项目"}},[a("el-divider",[a("i",{staticClass:"el-icon-s-flag"})]),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticStyle:{float:"left","margin-left":"30px"}},[e._v(" 选择文本数据： "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.anotation.data,callback:function(t){e.$set(e.anotation,"data",t)},expression:"anotation.data"}},e._l(e.rawdata_list,(function(e){return a("el-option",{key:e.data_id,attrs:{label:e.data_name,value:e.data_id}})})),1)],1),a("div",{staticStyle:{float:"left","margin-left":"30px"}},[e._v(" 选择标注模型： "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.anotation.model,callback:function(t){e.$set(e.anotation,"model",t)},expression:"anotation.model"}},e._l(e.modelList,(function(e){return a("el-option",{key:e.model_id,attrs:{label:e.model_name,value:e.model_url}})})),1)],1),e.task.task_id?a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary",disabled:""}},[e._v("开始标注")]):a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:function(t){return e.addTask()}}},[e._v("开始标注")])],1),e.task.task_id?a("div",{staticStyle:{width:"100%","margin-left":"30px","margin-top":"30px","margin-bottom":"30px"}},[e._v("任务执行进度： "),"SUCCESS"==e.task.task_state.state?a("el-tag",{attrs:{type:"success"}},[e._v("执行完毕")]):e._e(),"PENDING"==e.task.task_state.state?a("el-tag",{attrs:{type:"warning"}},[e._v("等待中")]):e._e(),"PROGRESS"==e.task.task_state.state?a("el-tag",{attrs:{type:"danger"}},[e._v("执行中")]):e._e(),"SUCCESS"==e.task.task_state.state?a("el-progress",{staticStyle:{width:"50%","margin-top":"10px"},attrs:{percentage:100,status:"success"}}):a("el-progress",{staticStyle:{width:"50%","margin-top":"10px"},attrs:{percentage:parseInt(e.task.task_state.current/e.task.task_state.total*100)}})],1):e._e(),1==e.tripledataVisible?a("div",{staticStyle:{width:"90%"}},[a("div",{staticStyle:{"margin-left":"20px","margin-bottom":"10px"}},[a("span",{staticStyle:{color:"#409EFF"}},[a("i",{staticClass:"el-icon-s-data"}),e._v(" 三元组数据")])]),a("el-table",{ref:"filterTable",staticStyle:{width:"95%","margin-left":"2%"},attrs:{border:"",data:e.task.task_state.result,"max-height":"600"}},[a("el-table-column",{attrs:{fixed:"left",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"e1_type",label:"头节点类型",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"e1",label:"头节点名",width:"180"}}),a("el-table-column",{attrs:{prop:"relation_type",label:"关系",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v(e._s(t.row.relation_type))])]}}],null,!1,2485226660)}),a("el-table-column",{attrs:{prop:"e2_type",label:"尾节点类型",width:"180"}}),a("el-table-column",{attrs:{prop:"e2",label:"尾节点名",width:"180"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"}},[e._v("移除")])]}}],null,!1,4084444167)})],1),a("div",{staticStyle:{"margin-top":"20px","margin-left":"30px",float:"left"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:function(t){e.newTripledataVisible=!0}}},[e._v("审核通过，暂存数据")])],1),a("div",{staticStyle:{"margin-top":"20px","margin-left":"20px",float:"left"}},[a("el-button",{attrs:{type:"success",icon:"el-icon-pie-chart"}},[e._v("直接创建融合项目")])],1)],1):e._e(),a("el-dialog",{staticStyle:{margin:"auto",width:"50%"},attrs:{title:"暂存三元组数据",visible:e.newTripledataVisible},on:{"update:visible":function(t){e.newTripledataVisible=t}}},[a("el-form",{attrs:{model:e.new_tripledata}},[a("el-form-item",{attrs:{label:"三元组名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_tripledata.name,callback:function(t){e.$set(e.new_tripledata,"name",t)},expression:"new_tripledata.name"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"是否设置私有","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.new_tripledata.private,callback:function(t){e.$set(e.new_tripledata,"private",t)},expression:"new_tripledata.private"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.newTripledataVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:function(t){e.saveTripleData(),e.new_tripledata.result=e.task.task_state.result}}},[e._v("确认导入")])],1)],1)],1)],1)],1)],1):e._e()],1)},he=[],ge={inject:["reload"],created:function(){this.getProjectList(),this.project_task={},this.getRawdataList(),this.getModelList()},data:function(){return{projectList:[],rawdata_list:[],modelList:[{model_id:1,model_name:"三元组抽取"}],currentDate:new Date,addDialogVisible:!1,formLabelWidth:"100px",opt:"projectList",project_id:0,project_name:"",rename:{name:""},newAnnotationProject:{name:"",type_id:0},textarea:"",num1:1,num2:10,src:"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",child_graph_data:[],childTableVisible:!1,deleteDialogVisible:!1,updateDialogVisible:!1,newTripledataVisible:!1,drawer:!1,label_op:"DB",anotation:{data:"",model:""},tripledataVisible:!1,project_task:{},task:{task_id:"",task_state:{}},task_state:{},new_tripledata:{name:"",private:!0,result:{}}}},methods:{getProjectList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("project?type=annotation");case 2:a=t.sent,e.projectList=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},getRawdataList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("data?dtype=text");case 2:a=t.sent,r=a.data,e.rawdata_list=r.data;case 5:case"end":return t.stop()}}),t)})))()},getModelList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("model");case 2:a=t.sent,r=a.data,e.modelList=r.data;case 5:case"end":return t.stop()}}),t)})))()},addAnnotationProject:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("project",e.newAnnotationProject);case 3:t.sent,e.$message({showClose:!0,message:"创建标注项目成功！",type:"success"}),e.addDialogVisible=!1,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({showClose:!0,message:"该项目已存在！",type:"error"}),e.addDialogVisible=!1;case 12:e.reload();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},renameProject:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.rename),t.prev=1,t.next=4,e.$http.patch("project/"+e.project_id,e.rename);case 4:t.sent,e.$message({showClose:!0,message:"成功！",type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$message({showClose:!0,message:"出现异常！",type:"error"});case 11:e.updateDialogVisible=!1,e.reload();case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},goBack:function(){this.opt="projectList",this.anotation={data:"",model:""},this.tripledataVisible=!1,this.task={task_id:"",task_state:{}}},projectDetail:function(e,t){this.project_id=e,this.project_name=t,this.opt="projectDetail",this.task.task_id=this.project_task[e],this.task.task_id&&(this.getTaskState(),"SUCCESS"==this.task.task_state.state?this.tripledataVisible=!0:this.tripledataVisible=!1)},deleteProject:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.delete("project/"+e);case 3:a.sent,t.$message({showClose:!0,message:"删除项目成功！",type:"success"}),t.deleteDialogVisible=!1,t.reload(),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),t.$message({showClose:!0,message:"出现异常！",type:"error"}),t.deleteDialogVisible=!1;case 13:t.reload();case 14:case"end":return a.stop()}}),a,null,[[0,9]])})))()},addTask:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("project/"+e.project_id+"/task",{data_id:e.anotation.data,model_url:e.anotation.model});case 3:a=t.sent,r=a.data,e.project_task[e.project_id]=r.data.task_id,e.$message({showClose:!0,message:"开始标注！",type:"success"}),e.task.task_id=r.data.task_id,e.getTaskState(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.$message({showClose:!0,message:"出现异常！",type:"error"});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},getTaskState:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("project/"+e.project_id+"/task?task_id="+e.task.task_id);case 2:if(a=t.sent,r=a.data,e.task.task_state=r.data,"SUCCESS"!=e.task.task_state.state){t.next=11;break}return console.log(e.task.task_state.result),e.report(),t.abrupt("return");case 11:"PENDING"==e.task.task_state.state?(n=e,setTimeout((function(){n.getTaskState()}),1e3)):"FAILURE"==e.task.task_state.state?console.log(e.task.task_state.state):(i=e,console.log(e.task.task_state.state),setTimeout((function(){i.getTaskState()}),1e3));case 12:case"end":return t.stop()}}),t)})))()},report:function(){this.tripledataVisible=!0},saveTripleData:function(){this.$message({showClose:!0,message:"暂存三元组数据成功！",type:"success"}),this.newTripledataVisible=!1},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}}},_e=ge,be=(a("d752"),Object(s["a"])(_e,fe,he,!1,null,null,null)),we=be.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",["projectList"==e.opt?a("div",[a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"30px"}},[a("el-button",{staticStyle:{"margin-left":"20px","margin-right":"20px"},attrs:{type:"success",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addDialogVisible=!0}}}),e._v("创建新融合项目 ")],1),e._l(e.projectList,(function(t){return a("el-col",{key:t.project_id,attrs:{span:4.5,offset:0}},[a("div",{on:{click:function(a){return e.projectDetail(t.project_id,t.project_name)}}},[a("el-card",{staticClass:"box-card",staticStyle:{height:"80%"},attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.project_name))])]),a("el-button",{staticStyle:{float:"left",color:"#606266"},attrs:{type:"text"},on:{click:function(a){e.project_id=t.project_id,e.deleteDialogVisible=!0}}},[e._v("编辑 ")]),a("el-button",{staticStyle:{float:"right",color:"#F56C6C"},attrs:{type:"text"},on:{click:function(a){e.project_id=t.project_id,e.deleteDialogVisible=!0}}},[e._v("删除 ")])],1)],1)])})),a("el-dialog",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{title:"新增标注项目",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{attrs:{model:e.newFusionProject}},[a("el-form-item",{attrs:{label:"项目名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newFusionProject.name,callback:function(t){e.$set(e.newFusionProject,"name",t)},expression:"newFusionProject.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addFusionProject()}}},[e._v("确 定")])],1)],1)],2):e._e(),a("el-dialog",{attrs:{title:"提示",visible:e.deleteDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.deleteDialogVisible=t}}},[a("span",[e._v("确认删除该项目？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.deleteDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.deleteProject(e.project_id)}}},[e._v("确 定")])],1)]),"projectDetail"==e.opt?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-card",{staticStyle:{width:"100%",height:"65px"},attrs:{shadow:"never"}},[a("el-page-header",{staticStyle:{float:"left"},attrs:{content:e.project_name+" 项目详情"},on:{back:function(t){return e.goBack()}}})],1),a("div",{staticStyle:{width:"100%","margin-top":"5px"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-document"}),e._v(" 融合项目")]),a("el-divider",[a("i",{staticClass:"el-icon-s-flag"})]),a("div",[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("div",{staticStyle:{float:"left","margin-left":"30px"}},[e._v(" 选择待融合数据： "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.fusion.data,callback:function(t){e.$set(e.fusion,"data",t)},expression:"fusion.data"}},e._l(e.tripledataList,(function(e){return a("el-option",{key:e.data_id,attrs:{label:e.data_name,value:e.data_id}})})),1)],1),a("div",{staticStyle:{float:"left","margin-left":"30px"}},[e._v(" 选择融合模型： "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.fusion.model,callback:function(t){e.$set(e.fusion,"model",t)},expression:"fusion.model"}},e._l(e.modelList,(function(e){return a("el-option",{key:e.model_id,attrs:{label:e.model_name,value:e.model_id}})})),1)],1),a("div",{staticStyle:{float:"left","margin-left":"30px"}},[e._v(" 选择待融合图谱： "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.fusion.graph,callback:function(t){e.$set(e.fusion,"graph",t)},expression:"fusion.graph"}},e._l(e.graphList,(function(e){return a("el-option",{key:e.graph_id,attrs:{label:e.graph_name,value:e.graph_id}})})),1)],1),a("el-button",{staticStyle:{float:"left","margin-top":"50px","margin-bottom":"20px"},attrs:{type:"primary"},on:{click:function(t){e.tripledataVisible=!0}}},[e._v("生成融合报告")])],1)]),1==e.tripledataVisible?a("div",[a("div",{staticStyle:{"margin-left":"20px","margin-bottom":"10px","margin-top":"200px"}},[a("el-divider",{attrs:{"content-position":"left"}},[a("span",{staticStyle:{color:"#409EFF"}},[a("i",{staticClass:"el-icon-paperclip"}),e._v(" 情况1: 至少一个实体已存在知识图谱中")])])],1),a("el-table",{ref:"filterTable",staticStyle:{width:"83%","margin-left":"2%"},attrs:{border:"",data:e.newTripledata,"max-height":"600"}},[a("el-table-column",{attrs:{fixed:"left",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"e1_type",label:"起始类型",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"e1_name",label:"起始节点名",width:"180"}}),a("el-table-column",{attrs:{prop:"relation",label:"关系",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v(e._s(t.row.relation))])]}}],null,!1,2393674339)}),a("el-table-column",{attrs:{prop:"e2_type",label:"终止类型",width:"180"}}),a("el-table-column",{attrs:{prop:"e2_name",label:"终止节点名",width:"180"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"}},[e._v("移除")])]}}],null,!1,4084444167)})],1),a("div",{staticStyle:{"margin-left":"20px","margin-bottom":"10px","margin-top":"20px"}},[a("el-divider",{attrs:{"content-position":"left"}},[a("span",{staticStyle:{color:"#67C23A"}},[a("i",{staticClass:"el-icon-circle-plus-outline"}),e._v(" 情况2: 两实体均为新实体")])])],1),a("el-table",{ref:"filterTable",staticStyle:{width:"83%","margin-left":"2%"},attrs:{border:"",data:e.tripledata,"max-height":"600"}},[a("el-table-column",{attrs:{fixed:"left",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"e1_type",label:"起始类型",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"e1_name",label:"起始节点名",width:"180"}}),a("el-table-column",{attrs:{prop:"relation",label:"关系",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v(e._s(t.row.relation))])]}}],null,!1,2393674339)}),a("el-table-column",{attrs:{prop:"e2_type",label:"终止类型",width:"180"}}),a("el-table-column",{attrs:{prop:"e2_name",label:"终止节点名",width:"180"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"}},[e._v("移除")])]}}],null,!1,4084444167)})],1),a("div",{staticStyle:{"margin-left":"20px","margin-bottom":"10px","margin-top":"20px"}},[a("el-divider",{attrs:{"content-position":"left"}},[a("span",{staticStyle:{color:"#909399"}},[a("i",{staticClass:"el-icon-warning"}),e._v(" 情况3: 孤立新节点")])])],1),a("el-table",{ref:"filterTable",staticStyle:{width:"35%","margin-left":"2%"},attrs:{border:"",data:e.tripledata,"max-height":"600"}},[a("el-table-column",{attrs:{fixed:"left",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"e1_type",label:"类型",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"e1_name",label:"节点名",width:"180"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"}},[e._v("移除")])]}}],null,!1,4084444167)})],1),a("div",{staticStyle:{"margin-top":"20px","margin-left":"30px",float:"left"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"}},[e._v("审核通过，确认融合")])],1)],1):e._e()],1)],1)],1)],1):e._e()],1)},ye=[],xe=a("ade3"),ke=(a("b0c0"),{created:function(){this.getProjectList()},data:function(){return{projectList:[],tripledataList:[],modelList:[{model_id:1,model_name:"实体对齐模型"}],graphList:[],currentDate:new Date,addDialogVisible:!1,formLabelWidth:"100px",opt:"projectList",project_id:0,project_name:"",newFusionProject:{name:"",type_id:1},textarea:"",num1:1,num2:10,src:"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",child_graph_data:[],childTableVisible:!1,drawer:!1,op:"triple_data",fusion:{data:"",model:"",graph:""},tripledataVisible:!1,newTripledata:[{e1_name:"深度强化学习",e1_type:"处理方法",e2_name:"知识推理",e2_type:"处理方法",relation:"应用关系"},{e1_name:"深度强化学习",e1_type:"处理方法",e2_name:"自然语言处理",e2_type:"处理方法",relation:"应用关系"},{e1_name:"深度强化学习",e1_type:"处理方法",e2_name:"多任务迁移深度强化学习",e2_type:"处理方法",relation:"包含关系"},{e1_name:"深度强化学习",e1_type:"处理方法",e2_name:"多智能体深度强化学习",e2_type:"处理方法",relation:"包含关系"},{e1_name:"深度强化学习",e1_type:"处理方法",e2_name:"分层深度强化学习",e2_type:"处理方法",relation:"包含关系"}]}},methods:{getProjectList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("project?type=fusion");case 2:a=t.sent,e.projectList=a.data.data,console.log(e.projectList);case 5:case"end":return t.stop()}}),t)})))()},getTripledataList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("triple_data");case 2:a=t.sent,r=a.data,e.tripledataList=r.data,console.log(e.tripledataList);case 6:case"end":return t.stop()}}),t)})))()},getModelList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("model/fusion");case 2:a=t.sent,r=a.data,e.modelList=r.data,console.log(e.modelList);case 6:case"end":return t.stop()}}),t)})))()},getGraphList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("graph");case 2:a=t.sent,r=a.data,e.graphList=r.data,console.log(e.graphList);case 6:case"end":return t.stop()}}),t)})))()},projectDetail:function(e,t){this.project_id=e,this.project_name=t,this.opt="projectDetail",console.log(this.opt)},addFusionProject:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("project",e.newFusionProject);case 3:t.sent,e.$message({showClose:!0,message:"创建融合项目成功！",type:"success"}),e.addDialogVisible=!1,t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({showClose:!0,message:"该项目已存在！",type:"error"}),e.addDialogVisible=!1;case 12:e.reload();case 13:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteProject:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.delete("project/"+e);case 3:a.sent,t.$message({showClose:!0,message:"删除项目成功！",type:"success"}),t.deleteDialogVisible=!1,t.reload(),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),t.$message({showClose:!0,message:"出现异常！",type:"error"}),t.deleteDialogVisible=!1;case 13:t.reload();case 14:case"end":return a.stop()}}),a,null,[[0,9]])})))()},goBack:function(){this.opt="projectList"},gen_childGraph:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,l,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("http://39.100.48.36:3012/predict_re?sentence="+e.textarea);case 2:for(r=t.sent,console.log(r.data.relations),n=r.data.relations,e.graph_nodes=[],e.graph_links=[],e.child_graph_data=r.data.relations,i=n.length,l=0;l<i;l++)JSON.stringify(e.graph_nodes).indexOf(JSON.stringify(n[l]["e1"]))>-1||e.graph_nodes.push({id:n[l]["e1_type"]+"/"+n[l]["e1"],name:n[l]["e1"],type:n[l]["e1_type"]}),JSON.stringify(e.graph_nodes).indexOf(JSON.stringify(n[l]["e2"]))>-1||e.graph_nodes.push({id:n[l]["e2_type"]+"/"+n[l]["e2"],name:n[l]["e2"],type:n[l]["e2_type"]}),e.graph_links.push({id:n[l]["relation_type"]+"/"+n[l]["e1_type"]+"/"+n[l]["e1"]+"to"+n[l]["e2_type"]+"/"+n[l]["e2"],source:n[l]["e1_type"]+"/"+n[l]["e1"],target:n[l]["e2_type"]+"/"+n[l]["e2"]});o=ce["init"](e.$refs.childGraph),s={tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[(a={type:"graph",layout:"force",symbolSize:50,roam:!0,force:{repulsion:2500,edgeLength:[10,50],draggable:!0},itemStyle:{normal:{color:function(e){var t=["red","yellow","orange","green","blue","gray"];return t[e.dataIndex]}}}},Object(xe["a"])(a,"symbolSize",(function(e,t){return 40})),Object(xe["a"])(a,"label",{show:!0}),Object(xe["a"])(a,"edgeSymbol",["circle","arrow"]),Object(xe["a"])(a,"edgeSymbolSize",[4,10]),Object(xe["a"])(a,"edgeLabel",{fontSize:20}),Object(xe["a"])(a,"nodes",e.graph_nodes),Object(xe["a"])(a,"links",e.graph_links),Object(xe["a"])(a,"edgeLabel",{show:!0,position:"middle",fontSize:12,formatter:function(e){return e.data.id.split("/")[0]}}),Object(xe["a"])(a,"lineStyle",{opacity:.9,width:2,curveness:0}),a)]},o.setOption(s),o.on("click",(function(e){"node"==e.dataType?console.log(e.name):"edge"==e.dataType&&console.log(e)}));case 14:case"end":return t.stop()}}),t)})))()}},handleClose:function(e){this.$confirm("确认关闭？").then((function(t){e()})).catch((function(e){}))}}),je=ke,Se=(a("0839"),Object(s["a"])(je,ve,ye,!1,null,null,null)),De=Se.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",["graphs"==e.opt?a("div",{staticStyle:{width:"100%",height:"100%","margin-right":"20px"}},[e._v(" 选择查看某领域知识图谱： "),a("el-select",{attrs:{placeholder:"所有领域",clearable:""},on:{change:e.get_my_graph_list,clear:e.get_my_graph_list},model:{value:e.select_domain_id,callback:function(t){e.select_domain_id=t},expression:"select_domain_id"}},e._l(e.domain_list,(function(e){return a("el-option",{key:e.domain_id,attrs:{label:e.domain_name,value:e.domain_id}})})),1),a("el-row",{attrs:{gutter:35}},e._l(e.graph_list,(function(t){return a("el-col",{key:t.graph_id,attrs:{span:4.5,offset:0}},[a("div",{staticStyle:{"margin-bottom":"5%"},on:{click:function(a){return e.get_graph_detail(t.graph_id)}}},[a("el-card",{staticStyle:{width:"200px",height:"200px","margin-bottom":"10px","margin-top":"10px"},attrs:{shadow:"hover"}},[a("el-image",{staticStyle:{width:"100px",height:"100px","margin-left":"20%","margin-top":"5%"},attrs:{src:"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=3243406373,3135595743&fm=26&gp=0.jpg"}}),a("h4",[e._v(e._s(t.graph_name))])],1)],1)])})),1)],1):e._e(),a("el-dialog",{attrs:{title:"新增知识图谱",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{attrs:{model:e.newGraph}},[a("el-form-item",{attrs:{label:"知识图谱名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newGraph.name,callback:function(t){e.$set(e.newGraph,"name",t)},expression:"newGraph.name"}})],1),a("el-form-item",{attrs:{label:"图谱权限","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"0"},model:{value:e.newGraph.private,callback:function(t){e.$set(e.newGraph,"private",t)},expression:"newGraph.private"}},[e._v(" 公开 ")]),a("el-radio",{attrs:{label:"1"},model:{value:e.newGraph.private,callback:function(t){e.$set(e.newGraph,"private",t)},expression:"newGraph.private"}},[e._v(" 私有 ")])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add_graph()}}},[e._v(" 确 定 ")])],1)],1),"get_graph_detail"==e.opt?a("div",{staticStyle:{width:"100%",height:"100%"}},[a("el-card",{staticStyle:{width:"100%",height:"65px","background-color":"#fff"},attrs:{shadow:"never"}},[a("el-page-header",{staticStyle:{float:"left"},attrs:{content:e.graph_name+" 图谱详情"},on:{back:function(t){return e.goBack()}}}),a("div",{staticStyle:{width:"20%",float:"right"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入节点名称"},model:{value:e.searchVertexName,callback:function(t){e.searchVertexName=t},expression:"searchVertexName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.searchVertex()}},slot:"append"})],1)],1)],1),a("div",{staticStyle:{"margin-top":"5px","background-color":"#fff"}},[a("el-col",{attrs:{span:3}},[a("el-button",{staticStyle:{"margin-left":"10px","margin-right":"10px","margin-top":"10px","margin-bottom":"10px"},attrs:{size:"mini",type:"warning",icon:"el-icon-star-off",circle:""},on:{click:function(t){e.addVertexTypeVisible=!0}}}),e._v("添加实体类型 "),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2"}},[a("el-menu-item",[e._v("实体类型列表")]),e._l(e.collections_list,(function(t){return a("el-menu-item",{key:t,attrs:{"unique-opened":!0},on:{click:function(a){return e.show_graph_vertex(t,1)}}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-star-on"}),a("span",[e._v(e._s(t))])])],2)}))],2)],1)],1),a("div",{staticStyle:{"margin-left":"130px","margin-top":"5px"}},[a("el-card",{attrs:{shadow:"never"}},[0==e.search?a("div",{staticStyle:{height:"100%",float:"left"}},[a("el-button",{staticStyle:{"margin-left":"10px","margin-right":"10px","margin-bottom":"10px"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addVertexVisible=!0}}}),e._v("添加"+e._s(e.collection)+"节点 "),a("el-button",{staticStyle:{"margin-left":"10px","margin-right":"10px","margin-bottom":"10px"},attrs:{type:"danger",size:"mini",icon:"el-icon-plus",circle:""},on:{click:function(t){e.addRelationVisible=!0}}}),e._v("添加新关系类型 "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.vertexs_list,border:"",size:"mini"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"310"}}),a("el-table-column",{attrs:{prop:"name",label:"节点名称",width:"310"}}),a("el-table-column",{attrs:{label:"操作",width:"400"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"el-icon-picture",circle:""},on:{click:function(a){e.graphVisible=!0,e.vertex=t.row}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){e.editVisible=!0,e.vertex=t.row}}}),a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该节点及其与其他节点的所有关系吗？"},on:{confirm:function(t){return e.deleteVertex()}}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){e.vertex=t.row}},slot:"reference"})],1)]}}],null,!1,390337576)})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"10px","margin-left":"35%"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.vertex_nums},on:{"current-change":e.changePage}})],1)],1):a("div",[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("b",[e._v("查询到:"+e._s(e.searchLen)+"个相关节点")])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchResults,border:"",height:"500",size:"mini"}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"collection",label:"节点类型",width:"200"}}),a("el-table-column",{attrs:{prop:"_id",label:"ID",width:"250"}}),a("el-table-column",{attrs:{prop:"name",label:"节点名称",width:"250"}}),a("el-table-column",{attrs:{label:"操作",width:"320"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"success",icon:"el-icon-picture",circle:""},on:{click:function(a){e.graphVisible=!0,e.vertex=t.row}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){e.editVisible=!0,e.vertex=t.row}}}),a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"取消",icon:"el-icon-info","icon-color":"red",title:"确定删除该节点及其与其他节点的所有关系吗？"},on:{confirm:function(t){return e.deleteVertex()}}},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){e.vertex=t.row}},slot:"reference"})],1)]}}],null,!1,390337576)})],1)],1),a("el-dialog",{attrs:{title:"添加新实体类型",visible:e.addVertexTypeVisible},on:{"update:visible":function(t){e.addVertexTypeVisible=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"实体类型名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newVertexType,callback:function(t){e.newVertexType=t},expression:"newVertexType"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVertexTypeVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addVertexType(e.newVertexType)}}},[e._v(" 确 定 ")])],1)],1),a("el-dialog",{attrs:{title:"添加新实体节点",visible:e.addVertexVisible},on:{"update:visible":function(t){e.addVertexVisible=t}}},[a("el-form",{attrs:{model:e.newVertex}},[a("el-form-item",{attrs:{label:"实体类型","label-width":e.formLabelWidth}},[e._v(" "+e._s(e.collection)+" ")]),a("el-form-item",{attrs:{label:"实体节点名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newVertex.name,callback:function(t){e.$set(e.newVertex,"name",t)},expression:"newVertex.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addVertexVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNode(e.collection)}}},[e._v(" 确 定 ")])],1)],1),a("el-drawer",{attrs:{title:"图谱显示",visible:e.graphVisible,direction:"rtl",size:"60%",height:"100%"},on:{"update:visible":function(t){e.graphVisible=t},opened:function(t){return e.openDialog("1")},close:e.maxDepth}},[a("div",{staticStyle:{width:"90%",height:"90%","margin-left":"20px","margin-right":"20px"}},[a("div",{ref:"graph",style:{width:"100%",height:"100%"},attrs:{id:"graph"}})]),a("div",{staticStyle:{"margin-left":"40%","margin-top":"10px",bottom:"10px"}},[e._v(" 显示层数： "),a("el-select",{attrs:{placeholder:"1",size:"mini"},on:{change:function(t){return e.showEditGraph(e.maxDepth)}},model:{value:e.maxDepth,callback:function(t){e.maxDepth=t},expression:"maxDepth"}},e._l(5,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)]),a("el-drawer",{attrs:{title:"中心节点："+e.vertex.name,visible:e.editVisible,direction:"rtl",size:"60%",height:"100%"},on:{"update:visible":function(t){e.editVisible=t},opened:function(t){return e.openDialog("1")}}},[a("el-table",{ref:"filterTable",staticStyle:{width:"95%","margin-left":"2%"},attrs:{data:e.graph_links,"max-height":"600"}},[a("el-table-column",{attrs:{fixed:"left",type:"index",width:"50"}}),a("el-table-column",{attrs:{prop:"e1_type",label:"头节点类型",sortable:"",width:"180"}}),a("el-table-column",{attrs:{prop:"e1_name",label:"头节点名",width:"180"}}),a("el-table-column",{attrs:{prop:"relation",label:"关系",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v(e._s(t.row.relation))])]}}],null,!1,2393674339)}),a("el-table-column",{attrs:{prop:"e2_type",label:"尾节点类型",width:"180"}}),a("el-table-column",{attrs:{prop:"e2_name",label:"尾节点名",width:"180"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.handleEdit(t.row),t.row.link_editVisible=!0}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteEdge(t.row.relation_id)}}},[e._v("移除")]),a("el-dialog",{attrs:{title:"提示",visible:t.row.link_deleteVisible,width:"30%",center:""},on:{"update:visible":function(a){return e.$set(t.row,"link_deleteVisible",a)}}},[a("span",[e._v("您确定要删除这条关系数据吗？"+e._s(t.row.relation_id))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.row.link_deleteVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.deleteEdge(t.row.relation_id)}}},[e._v("确 定")])],1)]),a("el-drawer",{attrs:{title:"编辑数据","append-to-body":!0,visible:t.row.link_editVisible},on:{"update:visible":function(a){return e.$set(t.row,"link_editVisible",a)}}},[a("el-form",{attrs:{"label-width":"200px",model:e.newRelationData}},[a("el-form-item",{attrs:{label:"头节点实体:"}},[e._v(" "+e._s(t.row.e1_name)+" ")]),a("el-form-item",{attrs:{label:"头节点实体类型:"}},[e._v(" "+e._s(t.row.e1_type)+" ")]),a("el-form-item",{attrs:{label:"关系类型:"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{placeholder:t.row.relation},model:{value:e.newRelationData.relation,callback:function(t){e.$set(e.newRelationData,"relation",t)},expression:"newRelationData.relation"}},e._l(e.relation_list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"尾节点实体:"}},[e._v(" "+e._s(t.row.e2_name)+" ")]),a("el-form-item",{attrs:{label:"尾节点实体类型:"}},[e._v(" "+e._s(t.row.e2_type)+" ")]),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.editData(t.row)}}},[e._v("确认修改")])],1)],1)],1)]}}],null,!1,2807857824)})],1),a("el-divider",[a("i",{staticClass:"el-icon-s-operation"})]),a("el-button",{staticStyle:{"margin-left":"2%"},attrs:{type:"success",icon:"el-icon-edit"},on:{click:function(t){e.renameVertexVisible=!0}}},[e._v("重命名该中心节点: "+e._s(e.vertex.name))]),a("el-drawer",{attrs:{title:"编辑数据——中心节点："+e.vertex.name,"append-to-body":!0,visible:e.renameVertexVisible},on:{"update:visible":function(t){e.renameVertexVisible=t}}},[a("el-form",{staticStyle:{"margin-left":"10%"}},[a("el-form-item",{attrs:{label:"原名称","label-width":"100px"}},[e._v(" "+e._s(e.vertex.name)+" ")]),a("el-form-item",{attrs:{label:"新名称","label-width":"100px"}},[a("el-input",{staticStyle:{width:"60%"},model:{value:e.rename,callback:function(t){e.rename=t},expression:"rename"}})],1),a("el-form-item",{attrs:{"label-width":"100px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.renameVertex()}}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.renameVertexVisible=!1}}},[e._v("取 消")])],1)],1)],1),a("el-button",{staticStyle:{"margin-left":"2%"},attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.addNewEdgeVisible=!0}}},[e._v("新增关系节点")]),a("el-drawer",{attrs:{title:"编辑数据——中心节点："+e.vertex.name,"append-to-body":!0,visible:e.addNewEdgeVisible},on:{"update:visible":function(t){e.addNewEdgeVisible=t}}},[a("el-divider",[a("i",{staticClass:"el-icon-star-on"})]),a("el-form",{ref:"form",staticStyle:{"margin-left":"10%"},attrs:{model:e.newEdge,"label-width":"180px;"}},[a("el-form-item",{attrs:{label:"选择节点",prop:"resource"}},[a("el-autocomplete",{staticStyle:{width:"60%"},attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleSelectNewEdge},model:{value:e.newEdge.name,callback:function(t){e.$set(e.newEdge,"name",t)},expression:"newEdge.name"}})],1),a("el-form-item",{attrs:{label:"选择关系"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择关系类型"},model:{value:e.newEdge.relation,callback:function(t){e.$set(e.newEdge,"relation",t)},expression:"newEdge.relation"}},e._l(e.relation_list,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"节点类型"}},[a("el-radio-group",{model:{value:e.newEdge.node_type,callback:function(t){e.$set(e.newEdge,"node_type",t)},expression:"newEdge.node_type"}},[a("el-radio",{attrs:{label:"from"},model:{value:e.newEdge.node_type,callback:function(t){e.$set(e.newEdge,"node_type",t)},expression:"newEdge.node_type"}},[e._v("起始节点")]),a("el-radio",{attrs:{label:"to"},model:{value:e.newEdge.node_type,callback:function(t){e.$set(e.newEdge,"node_type",t)},expression:"newEdge.node_type"}},[e._v("终点节点")])],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addEdge(e.newEdge.relation)}}},[e._v("确认添加")])],1)],1)],1)],1),a("el-dialog",{staticStyle:{width:"50%",margin:"0 auto"},attrs:{title:"新增关系类型",visible:e.addRelationVisible},on:{"update:visible":function(t){e.addRelationVisible=t}}},[a("el-form",{attrs:{model:e.newRelation}},[a("el-form-item",{attrs:{label:"名称（英文）","label-width":"100px"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newRelation.name,callback:function(t){e.$set(e.newRelation,"name",t)},expression:"newRelation.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addRelationVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addRelation()}}},[e._v("确 定")])],1)],1)],1)],1)],1):e._e()],1)},Ve=[],Re=(a("841c"),a("c740"),a("d81d"),a("c7cd"),{created:function(){this.get_my_graph_list(),this.getMyDomainList()},inject:["reload"],data:function(){var e;return e={opt:"graphs",graph_id:"",search:"",graph_name:"",graph_list:[],domain_list:[],relation_list:[],collections_list:[],domain_id:"",collection:"",vertex:{},vertexs_list:[],vertex_nums:0,vertex_pages:0,currentPage:1,graph_nodes:[],graph_links:[],graph_categories:[],id2name:{},maxDepth:1,select_domain_id:"",table:"false",newGraph:{name:"",private:"0",domain_id:""},newVertex:{name:"",attr_1:"test"},newRelation:{name:"",from:"",to:""},newEdge:{node_id:"",name:"",node_type:"",relation:""},newRelationData:{e1_id:"",e1_type:"",e1_name:"",e2_id:"",e2_type:"",e2_name:"",relation_id:"",relation:""},myChart:{},searchEdges:[],rename:"",formLabelWidth:"120px",searchVertexName:"",graphVisible:!1,editVisible:!1,deleteNodeVisible:!1,addVertexVisible:!1,addVertexTypeVisible:!1,addRelationVisible:!1,addDialogVisible:!1,addNewEdgeVisible:!1,renameVertexVisible:!1,innerDrawer:!1,fullscreen:!1,timeout:null},Object(xe["a"])(e,"search",!1),Object(xe["a"])(e,"searchResults",[]),Object(xe["a"])(e,"searchLen",0),Object(xe["a"])(e,"newVertexType",""),e},methods:{get_my_graph_list:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(e),void 0!=e){a.next=7;break}return a.next=4,t.$http.get("/graph/");case 4:r=a.sent,a.next=10;break;case 7:return a.next=9,t.$http.get("/graph?domain="+e);case 9:r=a.sent;case 10:t.graph_list=r.data.data;case 11:case"end":return a.stop()}}),a)})))()},add_graph:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("graph/",{name:e.newGraph.name,domain_id:e.newGraph.domain_id,private:parseInt(e.newGraph.private)});case 3:a=t.sent,a.data,e.$message({showClose:!0,message:"添加知识图谱成功！",type:"success"}),e.addDialogVisible=!1,t.next=14;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message({showClose:!0,message:"添加知识图谱失败",type:"error"}),e.addDialogVisible=!1,e.reload();case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))()},get_graph_detail:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.opt="get_graph_detail",t.graph_id=e,t.relation_list=[],t.collections_list=[],t.collection=[],r={new_collection:""},a.next=8,t.$http.post("/graph/"+t.graph_id,r);case 8:n=a.sent,i=n.data,console.log(i.data),t.relation_list=i.data.edges,t.collections_list=i.data.collections,t.collection=t.collections_list[0],t.show_graph_vertex(t.collection,1),console.log(i.data);case 16:case"end":return a.stop()}}),a)})))()},getMyDomainList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("domain");case 2:a=t.sent,r=a.data,e.domain_list=r.data;case 5:case"end":return t.stop()}}),t)})))()},goBack:function(){this.opt="graphs"},changePage:function(e){this.currentPage=e,this.show_graph_vertex(this.collection,this.currentPage)},show_graph_vertex:function(e,t){var a=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.search=!1,a.collection=e,r.next=4,a.$http.get("graph/"+a.graph_id+"/vertex/"+e+"?page="+t+"&len=10");case 4:n=r.sent,i=n.data,console.log(i.data),a.vertexs_list=i.data.vertex,a.vertex_nums=i.data.count,a.vertex_pages=parseInt(i.data.pages);case 10:case"end":return r.stop()}}),r)})))()},openDialog:function(e){var t=this;this.$nextTick((function(){t.showEditGraph(e)}))},showEditGraph:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r,n,i,l,o,s,c,d,u,p,m,f,h,g,_,b,w;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.graph_nodes=[],t.graph_links=[],t.graph_categories=[],!t.graphVisible){a.next=20;break}return t.myChart=ce["init"](t.$refs.graph),t.myChart.showLoading(),a.next=8,t.$http.post(t.domain_id+"/graph/"+t.graph_id+"/traverse",{startVertex:t.vertex._id,direction:"any",maxDepth:parseInt(e),minDepth:0});case 8:for(n=a.sent,i=n.data,l=i.data.paths.length,o=0;o<l;o++){for(s=i.data.paths[o].vertices,c=i.data.paths[o].edges,d=s.length,u=c.length,p=0;p<d;p++)s[p]["id"]=s[p]["_id"],delete s[p]["_id"],m={name:s[p]["id"].split("/")[0]},JSON.stringify(t.graph_categories).indexOf(JSON.stringify(m))>-1||t.graph_categories.push(m),s[p]["category"]=t.graph_categories.findIndex((function(e){return e.name===m.name})),console.log(s[p]["category"]),JSON.stringify(t.graph_nodes).indexOf(JSON.stringify(s[p]))>-1||t.graph_nodes.push(s[p]);for(console.log(t.graph_nodes),console.log(t.graph_categories),f=0;f<u;f++)h={id:c[f]._id,source:c[f]._from,target:c[f]._to},0!=c[f].length&&-1==JSON.stringify(t.graph_links).indexOf(JSON.stringify(h))&&t.graph_links.push(h)}t.graph_nodes.map((function(e){return{id:e._id}})),t.myChart.hideLoading(),g={title:{text:"中心节点: "+t.vertex.name,subtext:"Default layout",top:"bottom",left:"leftt"},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",legend:[{data:t.graph_categories.map((function(e){return e.name}))}],color:["#ee6666","#91cc75","#fac858","#fc8452","#9a60b4","#ea7ccc","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],series:[(r={type:"graph",layout:"force",symbolSize:50,roam:!0,hoverAnimation:!0,notMerge:!0,force:{repulsion:2500,edgeLength:[20,50],draggable:!0,layoutAnimation:!1}},Object(xe["a"])(r,"symbolSize",(function(e,t){return 0==t.dataIndex?80:40})),Object(xe["a"])(r,"label",{show:!0}),Object(xe["a"])(r,"edgeSymbol",["circle","arrow"]),Object(xe["a"])(r,"edgeSymbolSize",[4,10]),Object(xe["a"])(r,"edgeLabel",{fontSize:20}),Object(xe["a"])(r,"nodes",t.graph_nodes),Object(xe["a"])(r,"links",t.graph_links),Object(xe["a"])(r,"categories",t.graph_categories),Object(xe["a"])(r,"edgeLabel",{show:!0,fontSize:12,formatter:function(e){return e.data.id.split("/")[0]}}),Object(xe["a"])(r,"lineStyle",{opacity:.9,width:2,curveness:0}),r)]},t.myChart.on("mouseup",(function(e){var t=myChart.getOption();t.series[0].data[e.dataIndex].x=e.event.offsetX,t.series[0].data[e.dataIndex].y=e.event.offsetY,t.series[0].data[e.dataIndex].fixed=!0,this.myChart.setOption(t)})),t.myChart.clear(),t.myChart.setOption(g),a.next=28;break;case 20:if(!t.editVisible){a.next=28;break}return t.graph_links=[],a.next=24,t.$http.post(t.domain_id+"/graph/"+t.graph_id+"/neighbor",{startVertex:t.vertex._id});case 24:for(_=a.sent,b=_.data,c=b.data,o=0;o<c.length;o++)w={},w["e1_id"]=c[o]["_from"],w["e1_type"]=c[o]["_from"].split("/")[0],w["e1_name"]=c[o]["_from_name"],w["e2_id"]=c[o]["_to"],w["e2_type"]=c[o]["_to"].split("/")[0],w["e2_name"]=c[o]["_to_name"],w["relation_id"]=c[o]["_id"],w["relation"]=c[o]["_id"].split("/")[0],w["link_deleteVisible"]=!1,w["link_editVisible"]=!1,t.graph_links.push(w);case 28:case"end":return a.stop()}}),a)})))()},fullGraph:function(){this.fullscreen=!0;var e=ce["init"](this.$refs.graph);e.resize({width:"1500px",height:"600px"})},addNode:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.post(t.domain_id+"/graph/"+t.graph_id+"/vertex/"+e,t.newVertex);case 3:a.sent,t.$message({showClose:!0,message:"成功！",type:"success"}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),t.$message({showClose:!0,message:"error!",type:"error"});case 10:t.addVertexVisible=!1,t.show_graph_vertex(t.collection,t.currentPage);case 12:case"end":return a.stop()}}),a,null,[[0,7]])})))()},addVertexType:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r={name:e},console.log(e);try{t.$http.post("graph/"+t.graph_id+"/vertex",r),t.$message({showClose:!0,message:"成功！",type:"success"})}catch(i){t.$message({showClose:!0,message:"error!",type:"error"})}return t.addVertexTypeVisible=!1,a.next=6,t.$http.post("/graph/"+t.graph_id,params);case 6:n=a.sent,n.data;case 8:case"end":return a.stop()}}),a)})))()},addRelation:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.newRelation),e.newRelation.from=e.collections_list,e.newRelation.to=e.collections_list,console.log(e.newRelation),t.next=6,e.$http.post(e.domain_id+"/graph/"+e.graph_id+"/edge",e.newRelation);case 6:a=t.sent,r=a.data,console.log(r),"Create edge collection succeed."==r.message?e.$message({showClose:!0,message:"添加新关系类型成功！",type:"success"}):e.$message({showClose:!0,message:"添加失败！",type:"error"}),e.addRelationVisible=!1,e.showEditGraph("1");case 12:case"end":return t.stop()}}),t)})))()},deleteEdge:function(e){var t=this;this.$confirm("此操作将永久删除该关系, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){try{t.$http.delete(t.domain_id+"/graph/"+t.graph_id+"/edge/"+e);t.$message({showClose:!0,message:"删除成功！",type:"success"})}catch(a){t.$message({showClose:!0,message:"删除失败！",type:"error"})}t.deleteNodeVisible=!1,t.showEditGraph("1")})).catch((function(){console.log("cancel"),t.$message({type:"info",message:"已取消删除"})}))},addEdge:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r={from:"",to:"",attribute:{}},r="from"==t.newEdge.node_type?{from:t.newEdge.node_id,to:t.vertex._id,attribute:{}}:{from:t.vertex._id,to:t.newEdge.node_id,attribute:{}},a.prev=2,a.next=5,t.$http.post(t.domain_id+"/graph/"+t.graph_id+"/edge/"+e,r);case 5:a.sent,t.$message({showClose:!0,message:"添加新节点成功！",type:"success"}),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),t.$message({showClose:!0,message:"添加失败！",type:"error"});case 12:t.addNewEdgeVisible=!1,t.showEditGraph("1");case 14:case"end":return a.stop()}}),a,null,[[2,9]])})))()},querySearchAsync:function(e,t){var a=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var n,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,a.$http.get(a.domain_id+"/graph/"+a.graph_id+"/vertex/like?name="+e+"&len=10");case 2:n=r.sent,i=n.data,clearTimeout(a.timeout),a.timeout=setTimeout((function(){t(i.data)}),3e3*Math.random());case 6:case"end":return r.stop()}}),r)})))()},handleSelectNewEdge:function(e){this.newEdge.node_id=e._id},handleSelectNewRelation:function(e){this.newRelation.node_id=e._id},searchVertex:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.search=!0,t.next=3,e.$http.get(e.domain_id+"/graph/"+e.graph_id+"/vertex/like?name="+e.searchVertexName+"&len=10");case 3:for(a=t.sent,r=a.data,e.searchResults=r.data,n=0;n<e.searchResults.length;n++)e.searchResults[n].collection=e.searchResults[n]._id.split("/")[0],e.searchResults[n].name=e.searchResults[n].value;e.searchLen=e.searchResults.length;case 8:case"end":return t.stop()}}),t)})))()},renameVertex:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a={name:e.rename},t.next=4,e.$http.patch(e.domain_id+"/graph/"+e.graph_id+"/vertex/"+e.vertex._id,a);case 4:t.sent,e.$message({showClose:!0,message:"重命名成功！",type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({showClose:!0,message:"重命名失败！",type:"error"});case 11:e.renameVertexVisible=!1,e.editVisible=!1,e.show_graph_vertex(e.collection,e.currentPage);case 14:case"end":return t.stop()}}),t,null,[[0,8]])})))()},deleteVertex:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.delete(e.domain_id+"/graph/"+e.graph_id+"/vertex/"+e.vertex._id);case 3:t.sent,e.$message({showClose:!0,message:"删除节点成功！",type:"success"}),t.next=11;break;case 7:t.prev=7,t.t0=t["catch"](0),e.$message({showClose:!0,message:"删除失败！",type:"error"}),console.log(t.t0);case 11:e.show_graph_vertex(e.collection,e.currentPage);case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},filterTag:function(e,t){return t.tag===e},filterHandler:function(e,t,a){var r=a["property"];return t[r]===e},handleEdit:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.newRelationData=Object.assign({},e);case 1:case"end":return a.stop()}}),a)})))()},editData:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(t.newRelationData),a.prev=1,a.next=4,t.$http.patch(t.domain_id+"/graph/"+t.graph_id+"/edge/"+t.newRelationData.relation_id,{relation:t.newRelationData.relation});case 4:a.sent,t.$message({showClose:!0,message:"数据更新成功！",type:"success"}),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),t.$message({showClose:!0,message:"出现异常！",type:"error"});case 11:e.addNewEdgeVisible=!1,t.showEditGraph("1");case 13:case"end":return a.stop()}}),a,null,[[1,8]])})))()}}}),Ce=Re,Le=(a("fc3c"),Object(s["a"])(Ce,$e,Ve,!1,null,null,null)),Oe=Le.exports,Ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{margin:"0 auto"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.domainList}},[a("el-table-column",{attrs:{type:"index",width:"200"}}),a("el-table-column",{attrs:{label:"领域ID",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.domain_id))])]}}])}),a("el-table-column",{attrs:{label:"领域名称",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.domain_name))])],1)]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.renameDialogVisible=!0,e.domain_id=t.row.domain_id}}},[e._v("重命名")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.delDialogVisible=!0,e.domain_id=t.row.domain_id}}},[e._v("删除")])]}}])})],1),a("div",{staticStyle:{float:"left"}},[a("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v("添加新领域")])],1),a("el-dialog",{attrs:{title:"删除提示",visible:e.delDialogVisible,width:"30%"},on:{"update:visible":function(t){e.delDialogVisible=t}}},[a("span",[e._v("确认删除该领域？")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.delDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteDomain()}}},[e._v("确 定")])],1)]),a("el-dialog",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{title:"重命名该领域",visible:e.renameDialogVisible},on:{"update:visible":function(t){e.renameDialogVisible=t}}},[a("el-form",{attrs:{model:e.newDomain}},[a("el-form-item",{attrs:{label:"输入新名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.rename.name,callback:function(t){e.$set(e.rename,"name",t)},expression:"rename.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.renameDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.renameDomain()}}},[e._v("确 定")])],1)],1),a("el-dialog",{staticStyle:{width:"40%",margin:"0 auto"},attrs:{title:"添加新领域",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{attrs:{model:e.newDomain}},[a("el-form-item",{attrs:{label:"输入新领域名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newDomain.name,callback:function(t){e.$set(e.newDomain,"name",t)},expression:"newDomain.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addNewDomain()}}},[e._v("确 定")])],1)],1)],1)},Pe=[],Fe={inject:["reload"],created:function(){this.getDomainList()},data:function(){return{domainList:[],search:"",multipleSelection:[],renameDialogVisible:!1,addDialogVisible:!1,delDialogVisible:!1,rename:{name:""},newDomain:{name:""},formLabelWidth:"120px",domain_id:0,domain_id_list:[]}},methods:{getDomainList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("domain");case 2:a=t.sent,e.domainList=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},addNewDomain:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("domain",e.newDomain);case 2:a=t.sent,r=a.data,e.domainList=r.data,e.addDialogVisible=!1,"Create domain succeed."===r.message?e.$message({showClose:!0,message:"添加新领域成功！",type:"success"}):e.$message({showClose:!0,message:"添加失败，该领域已存在！",type:"error"}),e.reload();case 8:case"end":return t.stop()}}),t)})))()},renameDomain:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.patch("domain/"+e.domain_id,e.rename);case 2:a=t.sent,r=a.data,e.renameDialogVisible=!1,"Updata domain succeed."===r.message?e.$message({showClose:!0,message:"重命名成功！",type:"success"}):e.$message({showClose:!0,message:"修改失败，数据库异常！",type:"error"}),e.reload();case 7:case"end":return t.stop()}}),t)})))()},deleteDomain:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.domain_id),e.$http.delete("domain/"+e.domain_id),e.$message({showClose:!0,message:"删除该领域成功！",type:"success"}),e.reload();case 4:case"end":return t.stop()}}),t)})))()}}},Te=Fe,Be=Object(s["a"])(Te,Ee,Pe,!1,null,null,null),ze=Be.exports,Ne=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ge=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"right-content"},[a("div",{staticStyle:{width:"600px",height:"400px"},attrs:{id:"main"}})])}],We={created:function(){},mounted:function(){var e,t=document.getElementById("main"),a=ce["init"](t);e={title:{text:"Graph 简单示例"},tooltip:{},animationDurationUpdate:1500,animationEasingUpdate:"quinticInOut",series:[{type:"graph",layout:"none",symbolSize:50,roam:!0,label:{show:!0},edgeSymbol:["circle","arrow"],edgeSymbolSize:[4,10],edgeLabel:{fontSize:20},data:[{name:"节点1",x:300,y:300},{name:"节点2",x:800,y:300},{name:"节点3",x:550,y:100},{name:"节点4",x:550,y:500}],links:[{source:0,target:1,symbolSize:[5,20],label:{show:!0},lineStyle:{width:5,curveness:.2}},{source:"节点2",target:"节点1",label:{show:!0},lineStyle:{curveness:.2}},{source:"节点1",target:"节点3"},{source:"节点2",target:"节点3"},{source:"节点2",target:"节点4"},{source:"节点1",target:"节点4"}],lineStyle:{opacity:.9,width:2,curveness:0}}]},e&&a.setOption(e)}},Ae=We,Ie=(a("57bf"),Object(s["a"])(Ae,Ne,Ge,!1,null,"27df6be5",null)),Me=Ie.exports,qe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",["projectList"==e.opt?a("div",[a("div",{staticStyle:{height:"200px",float:"left"},on:{click:function(t){e.addDialogVisible=!0}}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-plus",staticStyle:{"font-size":"20px",float:"left","margin-top":"50px"}},[e._v(" 添加新项目")])])],1),a("div",{on:{click:function(t){return e.projectDetail()}}},e._l(e.projectList,(function(t){return a("el-card",{key:t.project_id,staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(t.project_name))])]),a("div",{staticClass:"text item"},[e._v(" 所属领域： ")]),a("div",{staticClass:"text item"},[e._v(" 权限： ")])])})),1),a("el-dialog",{attrs:{title:"新增项目",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{attrs:{model:e.newProject}},[a("el-form-item",{attrs:{label:"项目名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.newProject.name,callback:function(t){e.$set(e.newProject,"name",t)},expression:"newProject.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addProject()}}},[e._v(" 确 定 ")])],1)],1)],1):e._e(),"projectDetail"==e.opt?a("div",{staticStyle:{width:"100%",height:"100px",background:"white"}},[a("el-card",{staticStyle:{width:"100%",height:"65px","background-color":"#fff"},attrs:{shadow:"never"}},[a("el-page-header",{staticStyle:{float:"left"},attrs:{content:e.project_name+" 项目详情"},on:{back:function(t){return e.goBack()}}})],1),a("div",{staticStyle:{width:"100%","margin-top":"5px"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-document"}),e._v("标注数据")]),a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"标注方式："}},[a("el-radio",{attrs:{label:"DB"},model:{value:e.form.dataType,callback:function(t){e.$set(e.form,"dataType",t)},expression:"form.dataType"}},[e._v(" DB ")]),a("el-radio",{attrs:{label:"Text"},model:{value:e.form.dataType,callback:function(t){e.$set(e.form,"dataType",t)},expression:"form.dataType"}},[e._v(" Text ")])],1),"DB"==e.form.dataType?a("el-form-item",{attrs:{label:"选择数据："}},[a("el-select",{attrs:{placeholder:"请选择数据库来源"},model:{value:e.form.DBname,callback:function(t){e.$set(e.form,"DBname",t)},expression:"form.DBname"}},[a("el-option",{attrs:{label:"DB_1",value:"shanghai"}}),a("el-option",{attrs:{label:"DB_2",value:"beijing"}})],1)],1):e._e(),"DB"==e.form.dataType?a("el-form-item",{attrs:{label:"选择模型："}},[a("el-select",{attrs:{placeholder:"请选择模型"},model:{value:e.form.DBname,callback:function(t){e.$set(e.form,"DBname",t)},expression:"form.DBname"}},[a("el-option",{attrs:{label:"Model_1",value:"shanghai"}}),a("el-option",{attrs:{label:"Model_2",value:"beijing"}})],1)],1):e._e(),"DB"==e.form.dataType?a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[e._v(" 开始标注 ")]),a("el-button",{on:{click:function(t){e.tempDialogVisible=!0}}},[e._v(" 暂存 ")])],1):e._e()],1),"Text"==e.form.dataType?a("div",[a("div",{staticStyle:{float:"left"}},[a("el-aside",{attrs:{width:"700px"}},[a("el-card",{attrs:{shadow:"always"}},[a("h5",{staticStyle:{margin:"0",display:"inline",width:"30px"}},[e._v(" 输入文本 ")]),a("el-divider",{staticStyle:{margin:"10px"},attrs:{"content-position":"left"}}),a("el-input",{staticClass:"textinput",attrs:{type:"textarea",rows:10,placeholder:"请输入待生成知识图谱的文本内容"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),a("el-button",{staticStyle:{float:"right","margin-top":"3px","margin-bottom":"3px"},attrs:{type:"primary",plain:""},on:{click:function(t){return e.gen_childGraph()}}},[e._v(" 确认生成 ")])],1)],1),a("el-aside",{staticClass:"childKG",attrs:{width:"700px",height:"100%"}},[a("el-card",{attrs:{shadow:"always"}},[a("h5",{staticStyle:{margin:"0",display:"inline",width:"50px"}},[e._v(" 生成子图 ")]),a("el-divider",{staticStyle:{margin:"15px"},attrs:{"content-position":"left"}}),a("div",{ref:"childGraph",staticStyle:{width:"600px",height:"300px"},attrs:{id:"main"}}),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.child_graph_data,height:"320","font-size":"12px",border:"","row-style":{height:"10px"},"cell-style":{padding:"0"}}},[a("el-table-column",{attrs:{fixed:"",type:"index",label:"序号",width:"50"}}),a("el-table-column",{attrs:{prop:"e1",label:"起点实体",width:"80"}}),a("el-table-column",{attrs:{prop:"e1_type",label:"起点实体类型",width:"110"}}),a("el-table-column",{attrs:{prop:"e2",label:"终点实体",width:"80"}}),a("el-table-column",{attrs:{prop:"e2_type",label:"终点实体类型",width:"110"}}),a("el-table-column",{attrs:{prop:"relation_type",label:"关系类型",width:"80"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v(" 查看 ")]),a("el-button",{attrs:{type:"text",size:"small"}},[e._v(" 编辑 ")])]}}],null,!1,33760724)})],1)]],2)],1)],1),a("el-aside",{staticStyle:{"margin-top":"10px",float:"right"},attrs:{width:"540px",height:"100%"}},["Text"==e.form.dataType?a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"选择模型："}},[a("el-select",{attrs:{placeholder:"请选择模型"},model:{value:e.form.DBname,callback:function(t){e.$set(e.form,"DBname",t)},expression:"form.DBname"}},[a("el-option",{attrs:{label:"Model_1",value:"shanghai"}}),a("el-option",{attrs:{label:"Model_2",value:"beijing"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[e._v(" 开始标注 ")]),a("el-button",{on:{click:function(t){e.tempDialogVisible=!0}}},[e._v(" 暂存 ")])],1)],1):e._e()],1)],1):e._e(),a("el-dialog",{attrs:{title:"暂存",visible:e.tempDialogVisible},on:{"update:visible":function(t){e.tempDialogVisible=t}}},[a("el-form",{attrs:{model:e.tempForm}},[a("el-form-item",{attrs:{label:"数据集名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.tempForm.name,callback:function(t){e.$set(e.tempForm,"name",t)},expression:"tempForm.name"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.tempDialogVisible=!1}}},[e._v(" 取 消 ")]),a("el-button",{attrs:{type:"primary"}},[e._v(" 确 定 ")])],1)],1)],1),a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-user"}),e._v(" 用户管理")]),e._v(" 用户管理 ")])],1)],1)],1):e._e()])},Ue=[],Je={created:function(){this.getProjectList()},data:function(){return{projectList:[],addDialogVisible:!1,formLabelWidth:"100px",opt:"projectList",project_id:0,project_name:"",newProject:{name:"",domain:""},form:{dataType:"DB",DBname:""},tempForm:{name:""},textarea:"",num1:1,num2:10,src:"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg",child_graph_data:[],tempDialogVisible:!1}},methods:{getProjectList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("list_projects");case 2:a=t.sent,e.projectList=a.data.data;case 4:case"end":return t.stop()}}),t)})))()},goBack:function(){this.opt="projectList"},projectDetail:function(){this.opt="projectDetail"}}},Ke=Je,Qe=Object(s["a"])(Ke,qe,Ue,!1,null,null,null),He=Qe.exports,Ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",["raw_data_list"==e.opt?a("div",{staticStyle:{width:"100%"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"数据列表"}},[a("el-table",{attrs:{data:e.raw_data_list}},[a("el-table-column",{attrs:{label:"数据ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data_id))])]}}],null,!1,1299080516)}),a("el-table-column",{attrs:{label:"数据名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("div",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.row.data_name))])])]}}],null,!1,1048383834)}),a("el-table-column",{attrs:{label:"数据类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"==t.row.data_type?a("el-tag",{attrs:{size:"medium",type:"info"}},[e._v("Text")]):e._e(),"1"==t.row.data_type?a("el-tag",{attrs:{size:"medium"}},[e._v("MySQL")]):e._e(),"2"==t.row.data_type?a("el-tag",{attrs:{size:"medium",type:"warning"}},[e._v("MongoDB")]):e._e()]}}],null,!1,570727839)}),a("el-table-column",{attrs:{label:"数据权限",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[1==t.row.private?a("el-tag",{attrs:{size:"medium",type:"danger"}},[e._v("私有")]):a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v("公开")])],1)]}}],null,!1,254781065)}),a("el-table-column",{staticStyle:{"margin-left":"10px"},attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}],null,!1,4222505840)})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"2%","margin-left":"10%"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),a("el-tab-pane",{attrs:{label:"导入数据"}},[e._v(" 请选择导入方式： "),a("el-radio",{attrs:{label:"DB"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[e._v("数据库")]),a("el-radio",{attrs:{label:"File"},model:{value:e.method,callback:function(t){e.method=t},expression:"method"}},[e._v("文件")]),a("el-divider",[a("i",{staticClass:"el-icon-receiving"})]),"DB"==e.method?a("el-form",{ref:"new_raw_data_DB",staticStyle:{"margin-left":"25%"},attrs:{model:e.new_raw_data_DB}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"数据名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_raw_data_DB.name,callback:function(t){e.$set(e.new_raw_data_DB,"name",t)},expression:"new_raw_data_DB.name"}})],1),a("el-form-item",{attrs:{label:"所属领域","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.new_raw_data_DB.domain_id,callback:function(t){e.$set(e.new_raw_data_DB,"domain_id",t)},expression:"new_raw_data_DB.domain_id"}},e._l(e.domain_list,(function(e){return a("el-option",{key:e.domain_id,attrs:{label:e.domain_name,value:e.domain_id}})})),1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"是否设置私有","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.new_raw_data_DB.private,callback:function(t){e.$set(e.new_raw_data_DB,"private",t)},expression:"new_raw_data_DB.private"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"数据类型","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.new_raw_data_DB.data_info.server,callback:function(t){e.$set(e.new_raw_data_DB.data_info,"server",t)},expression:"new_raw_data_DB.data_info.server"}},[a("el-radio",{attrs:{label:"mysql"}},[e._v("MySQL")]),a("el-radio",{attrs:{label:"mongodb"}},[e._v("MongoDB")])],1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"ip","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_raw_data_DB.data_info.ip,callback:function(t){e.$set(e.new_raw_data_DB.data_info,"ip",t)},expression:"new_raw_data_DB.data_info.ip"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"port","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_raw_data_DB.data_info.port,callback:function(t){e.$set(e.new_raw_data_DB.data_info,"port",t)},expression:"new_raw_data_DB.data_info.port"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"username","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_raw_data_DB.data_info.username,callback:function(t){e.$set(e.new_raw_data_DB.data_info,"username",t)},expression:"new_raw_data_DB.data_info.username"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"password","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.new_raw_data_DB.data_info.password,callback:function(t){e.$set(e.new_raw_data_DB.data_info,"password",t)},expression:"new_raw_data_DB.data_info.password"}})],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"db","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_raw_data_DB.data_info.db,callback:function(t){e.$set(e.new_raw_data_DB.data_info,"db",t)},expression:"new_raw_data_DB.data_info.db"}})],1),a("el-form-item",[a("el-button",{staticStyle:{"margin-left":"13%",width:"250px"},attrs:{type:"primary"},on:{click:e.add_raw_data_DB}},[e._v("确 定")]),a("el-button",{on:{click:e.resetForm}},[e._v("重 置")])],1)],1):e._e(),"File"==e.method?a("div",{staticStyle:{"margin-left":"25%"}},[a("el-form",{attrs:{id:"new_raw_data_file"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"数据名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{name:"name",autocomplete:"off"},model:{value:e.new_raw_data_file.name,callback:function(t){e.$set(e.new_raw_data_file,"name",t)},expression:"new_raw_data_file.name"}})],1),a("el-form-item",{attrs:{label:"所属领域","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.new_raw_data_file.domain_id,callback:function(t){e.$set(e.new_raw_data_file,"domain_id",t)},expression:"new_raw_data_file.domain_id"}},e._l(e.domain_list,(function(e){return a("el-option",{key:e.domain_id,attrs:{label:e.domain_name,value:e.domain_id}})})),1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"是否设置私有","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.new_raw_data_file.private,callback:function(t){e.$set(e.new_raw_data_file,"private",t)},expression:"new_raw_data_file.private"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),a("div",{staticStyle:{"margin-left":"10%"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","http-request":e.confirm_add_file,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("确认导入")]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传.txt文件")])],1)],1)],1):e._e()],1)],1)],1):e._e(),"raw_data_detail"==e.opt?a("div",{staticStyle:{width:"100%",height:"100px",background:"white"}},[a("el-card",{staticStyle:{width:"100%",height:"65px","background-color":"#fff"},attrs:{shadow:"never"}},[a("el-page-header",{staticStyle:{float:"left"},attrs:{content:e.project_name+" DB详情"},on:{back:function(t){return e.goBack()}}})],1),a("div",{staticStyle:{width:"100%","margin-top":"5px"}})],1):e._e()])},Xe=[],Ze={inject:["reload"],created:function(){this.get_raw_data_list(),this.getMyDomainList()},data:function(){return{fileList:[],domain_list:[],raw_data_list:[],addDialogVisible:!1,formLabelWidth:"120px",opt:"raw_data_list",raw_data_id:0,raw_data_name:"",method:"DB",new_raw_data_DB:{name:"",data_type:"db",private:!0,data_info:{server:"",ip:"",port:"",username:"",password:"",db:""},domain_id:""},file:{},params:{},new_raw_data_file:{name:"",data_type:"text",private:!0,domain_id:"",data_info:""},form:{dataType:"DB",DBname:""},tempForm:{name:""},tempDialogVisible:!1,currentPage:1,totalPage:0}},methods:{get_raw_data_list:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("data?dtype=text");case 2:a=t.sent,r=a.data,e.raw_data_list=r.data,e.totalPage=r.data.length;case 6:case"end":return t.stop()}}),t)})))()},getMyDomainList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("domain");case 2:a=t.sent,r=a.data,e.domain_list=r.data;case 5:case"end":return t.stop()}}),t)})))()},goBack:function(){this.opt="projectList"},add_raw_data_DB:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("data/",e.new_raw_data_DB);case 3:a=t.sent,a.data,e.$message({showClose:!0,message:"导入成功！",type:"success"}),e.reload(),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),e.$message({showClose:!0,message:"导入失败！",type:"error"});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},confirm_add_file:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.set("file",e.file),a.next=4,t.$http.post("upload/text",r,{headers:{"Content-type":"multipart/form-data"}});case 4:n=a.sent,i=n.data,t.new_raw_data_file.data_info=i.url;case 7:case"end":return a.stop()}}),a)})))()},resetForm:function(){this.$refs.new_raw_data_DB.resetFields(),console.log("1")},raw_data_detail:function(){this.opt="DBDetail"},submitUpload:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("data/",e.new_raw_data_file);case 3:t.sent,e.$message({showClose:!0,message:"导入成功！",type:"success"}),e.reload(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({showClose:!0,message:"异常！",type:"error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleDelete:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.delete("data/"+e.data_id);case 3:r=a.sent,r.data,t.$message({showClose:!0,message:"删除成功！",type:"success"}),t.reload(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),t.$message({showClose:!0,message:"异常！",type:"error"});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}}},et=Ze,tt=Object(s["a"])(et,Ye,Xe,!1,null,null,null),at=tt.exports,rt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("div",{staticStyle:{width:"100%"}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"数据列表"}},[a("el-table",{attrs:{data:e.triple_data_list}},[a("el-table-column",{attrs:{label:"数据ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.data_id))])]}}])}),a("el-table-column",{attrs:{label:"数据名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[a("div",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.row.data_name))])])]}}])}),a("el-table-column",{attrs:{label:"数据类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium"}},[e._v("三元组")])]}}])}),a("el-table-column",{attrs:{label:"数据权限",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[1==t.row.private?a("el-tag",{attrs:{size:"medium",type:"danger"}},[e._v("私有")]):a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v("公开")])],1)]}}])}),a("el-table-column",{staticStyle:{"margin-left":"10px"},attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"margin-top":"2%","margin-left":"10%"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),a("el-tab-pane",{attrs:{label:"导入数据"}},[a("el-divider",[a("i",{staticClass:"el-icon-receiving"})]),"File"==e.method?a("div",{staticStyle:{"margin-left":"25%"}},[a("el-form",{attrs:{id:"new_triple_data_file"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"数据名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{name:"name",autocomplete:"off"},model:{value:e.new_triple_data_file.name,callback:function(t){e.$set(e.new_triple_data_file,"name",t)},expression:"new_triple_data_file.name"}})],1),a("el-form-item",{attrs:{label:"所属领域","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.new_triple_data_file.domain_id,callback:function(t){e.$set(e.new_triple_data_file,"domain_id",t)},expression:"new_triple_data_file.domain_id"}},e._l(e.domain_list,(function(e){return a("el-option",{key:e.domain_id,attrs:{label:e.domain_name,value:e.domain_id}})})),1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"是否设置私有","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.new_triple_data_file.private,callback:function(t){e.$set(e.new_triple_data_file,"private",t)},expression:"new_triple_data_file.private"}},[a("el-radio",{attrs:{label:!0}},[e._v("是")]),a("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1)],1),a("div",{staticStyle:{"margin-left":"10%"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"","http-request":e.confirm_add_file,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.fileList,"auto-upload":!0}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[e._v("选取文件")]),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:e.submitUpload}},[e._v("确认导入")]),a("div",{staticClass:"el-upload__tip",staticStyle:{color:"red"},attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传.json/.csv文件")])],1)],1)],1):e._e()],1)],1)],1)])},nt=[],it=(a("99af"),{inject:["reload"],created:function(){this.get_triple_data_list(),this.getMyDomainList()},data:function(){return{triple_data_list:[],domain_list:[],addDialogVisible:!1,formLabelWidth:"120px",opt:"raw_data_list",raw_data_id:0,raw_data_name:"",method:"File",file_list:[],file:{},params:{},new_triple_data_file:{name:"",data_type:"data",private:!0,domain_id:"",data_info:""},form:{dataType:"DB",DBname:""},tempForm:{name:""},tempDialogVisible:!1,currentPage:1,totalPage:0}},methods:{get_triple_data_list:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("data?dtype=data");case 2:a=t.sent,r=a.data,console.log(r.data),e.triple_data_list=r.data,e.totalPage=r.data.length;case 7:case"end":return t.stop()}}),t)})))()},getMyDomainList:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("domain");case 2:a=t.sent,r=a.data,e.domain_list=r.data;case 5:case"end":return t.stop()}}),t)})))()},goBack:function(){this.opt="projectList"},confirm_add_file:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=new FormData,r.set("file",e.file),a.next=4,t.$http.post("upload/data",r,{headers:{"Content-type":"multipart/form-data"}});case 4:n=a.sent,i=n.data,t.new_triple_data_file.data_info=i.url;case 7:case"end":return a.stop()}}),a)})))()},submitUpload:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("data/",e.new_triple_data_file);case 3:t.sent,e.$message({showClose:!0,message:"导入成功！",type:"success"}),e.reload(),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),e.$message({showClose:!0,message:"异常！",type:"error"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},raw_data_detail:function(){this.opt="DBDetail"},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 3 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleDelete:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,t.$http.delete("data/"+e.data_id);case 3:r=a.sent,r.data,t.$message({showClose:!0,message:"删除成功！",type:"success"}),t.reload(),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](0),t.$message({showClose:!0,message:"异常！",type:"error"});case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}}}),lt=it,ot=Object(s["a"])(lt,rt,nt,!1,null,null,null),st=ot.exports,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"10px",width:"700px","margin-left":"10px"}},[a("el-card",[a("h3",[e._v("请输入问题：")]),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:e.question,callback:function(t){e.question=t},expression:"question"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1),a("el-card",{staticStyle:{"margin-top":"20px"}},[a("h3",[e._v("答案：")]),a("el-input",{staticClass:"input-with-select",attrs:{placeholder:""},model:{value:e.answer,callback:function(t){e.answer=t},expression:"answer"}})],1),a("el-card",{staticStyle:{"margin-top":"20px"}},[a("h3",[e._v("知识图谱子图：")]),a("div",{ref:"graph",staticStyle:{width:"600px",height:"400px"},attrs:{id:"main"}}),a("div",{staticStyle:{position:"absolute","margin-left":"25%",bottom:"10px"}},[e._v(" 显示层数： "),a("el-select",{attrs:{placeholder:"2",size:"mini"},on:{change:function(t){return e.showEditGraph(e.maxDepth)}},model:{value:e.maxDepth,callback:function(t){e.maxDepth=t},expression:"maxDepth"}},e._l(5,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)])],1)},dt=[],ut={created:function(){this.showEditGraph(2)},data:function(){return{question:"",answer:"",domain_id:"27",graph_id:"40",vertex_id:"",graph_nodes:[],graph_links:[]}},methods:{}},pt=ut,mt=Object(s["a"])(pt,ct,dt,!1,null,null,null),ft=mt.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.model_list}},[a("el-table-column",{attrs:{label:"模型ID",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.model_id))])]}}])}),a("el-table-column",{attrs:{label:"模型类型",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[0==t.row.model_type?a("el-tag",{attrs:{size:"medium"}},[e._v("标注模型")]):a("el-tag",{attrs:{size:"medium",type:"success"}},[e._v("融合模型")])],1)]}}])}),a("el-table-column",{attrs:{label:"模型名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.model_name))])]}}])}),a("el-table-column",{attrs:{label:"模型url",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.model_url))])]}}])}),a("el-table-column",{attrs:{label:"描述",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.model_description))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.row.model_id)}}},[e._v("删除")])]}}])})],1),a("div",[a("el-button",{staticStyle:{"margin-top":"20px",float:"left"},attrs:{type:"primary"},on:{click:function(t){e.addDialogVisible=!0}}},[e._v(" 添加新模型 ")])],1),a("el-dialog",{staticStyle:{width:"50%",margin:"0 auto"},attrs:{title:"添加新模型",visible:e.addDialogVisible},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("el-form",{attrs:{model:e.new_model}},[a("el-form-item",{attrs:{label:"模型名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_model.model_name,callback:function(t){e.$set(e.new_model,"model_name",t)},expression:"new_model.model_name"}})],1),a("el-form-item",{attrs:{label:"模型类型","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.new_model.model_type,callback:function(t){e.$set(e.new_model,"model_type",t)},expression:"new_model.model_type"}},e._l(e.new_model_type,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"模型url","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.new_model.model_url,callback:function(t){e.$set(e.new_model,"model_url",t)},expression:"new_model.model_url"}})],1),a("el-form-item",{attrs:{label:"权限","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.new_model.model_private,callback:function(t){e.$set(e.new_model,"model_private",t)},expression:"new_model.model_private"}},[a("el-radio",{attrs:{label:!0}},[e._v("私有")]),a("el-radio",{attrs:{label:!1}},[e._v("公开")])],1)],1),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.new_model.model_description,callback:function(t){e.$set(e.new_model,"model_description",t)},expression:"new_model.model_description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.addDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addModel()}}},[e._v("确 定")])],1)],1),a("el-dialog",{staticStyle:{width:"50%",margin:"0 auto"},attrs:{title:"编辑模型信息",visible:e.editDialogVisible},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{attrs:{model:e.update_model}},[a("el-form-item",{attrs:{label:"模型名称","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.update_model.model_name,callback:function(t){e.$set(e.update_model,"model_name",t)},expression:"update_model.model_name"}})],1),a("el-form-item",{attrs:{label:"模型类型","label-width":e.formLabelWidth}},[a("el-select",{attrs:{placeholder:"标注模型"},model:{value:e.update_model.modle_type,callback:function(t){e.$set(e.update_model,"modle_type",t)},expression:"update_model.modle_type"}},e._l(e.new_model_type,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"模型url","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.update_model.model_url,callback:function(t){e.$set(e.update_model,"model_url",t)},expression:"update_model.model_url"}})],1),a("el-form-item",{attrs:{label:"描述","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.update_model.model_description,callback:function(t){e.$set(e.update_model,"model_description",t)},expression:"update_model.model_description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirmEdit()}}},[e._v("确 定")])],1)],1)],1)},gt=[],_t={inject:["reload"],data:function(){return{options:[{label:"标注模型",value:"/annotation"},{label:"融合模型",value:"/fusion"},{label:"全部模型",value:""}],new_model_type:[{label:"标注模型",value:0},{label:"融合模型",value:1}],model_type:"",formLabelWidth:"100px",model_list:[],currentPage:1,totalPage:1,addDialogVisible:!1,editDialogVisible:!1,new_model:{model_type:"",model_name:"",model_url:"",model_private:!0,model_description:""},update_model:{model_type:"",model_name:"",model_url:"",model_private:"",model_description:""},model_id:""}},created:function(){this.getModellist()},methods:{getModellist:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("model"+e.model_type);case 2:a=t.sent,r=a.data,e.model_list=r.data;case 5:case"end":return t.stop()}}),t)})))()},addModel:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.new_model),t.next=3,e.$http.post("model",e.new_model);case 3:a=t.sent,r=a.data,console.log(r),e.addDialogVisible=!1,"Create model succeed."==r.message?e.$message({showClose:!0,message:"添加新模型成功！",type:"success"}):"Model already exist."==r.message&&e.$message({showClose:!0,message:"该模型已存在！",type:"error"}),e.getModellist();case 9:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.editDialogVisible=!0,t.update_model=Object.assign({},e),t.model_id=e.model_id,delete t.update_model.model_id;case 4:case"end":return a.stop()}}),a)})))()},confirmEdit:function(){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.update_model),t.prev=1,t.next=4,e.$http.patch("model/"+e.model_id,e.update_model);case 4:t.sent,e.$message({showClose:!0,message:"更新模型成功！",type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$message({showClose:!0,message:"异常！",type:"error"});case 11:e.editDialogVisible=!1,e.reload();case 13:case"end":return t.stop()}}),t,null,[[1,8]])})))()},handleDelete:function(e){var t=this;this.$confirm("确定删除该模型？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(v["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(e),a.next=3,t.$http.delete("model/"+e);case 3:r=a.sent,n=r.data,console.log(n),"Delete model succeed."==n.message&&(t.$message({type:"success",message:"删除成功!"}),t.getModellist());case 7:case"end":return a.stop()}}),a)})))).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},bt=_t,wt=Object(s["a"])(bt,ht,gt,!1,null,null,null),vt=wt.exports;r["default"].use(u["a"]);var yt=new u["a"]({mode:"history",routes:[{path:"/",redirect:"/login"},{path:"/register",component:ee},{path:"/login",component:K},{path:"/home",component:j,children:[{path:"/",components:{default:j,generate_graph:le,my_project:me,annotate_project:we,fusion_project:De,my_graph:Oe,mydomain:ze,textinput:_,originKG:C,search:T,entityResult:A,labelproject:He,myRawdata:at,myTripleData:st,QA:ft,mymodel:vt}},{path:"graphDetail",components:{graphDetail:Me}}]}]}),xt=u["a"].prototype.push;u["a"].prototype.push=function(e){return xt.call(this,e).catch((function(e){return e}))};a("6611"),a("450d");var kt=a("e772"),jt=a.n(kt),St=(a("1f1ab"),a("4e4b")),Dt=a.n(St),$t=(a("9d4c"),a("e450")),Vt=a.n($t),Rt=(a("5466"),a("ecdf")),Ct=a.n(Rt),Lt=(a("acb6"),a("c673")),Ot=a.n(Lt),Et=(a("38a0"),a("ad41")),Pt=a.n(Et),Ft=(a("e3ea"),a("7bc3")),Tt=a.n(Ft),Bt=(a("b8e0"),a("a4c4")),zt=a.n(Bt),Nt=(a("920a"),a("4f0c")),Gt=a.n(Nt),Wt=(a("de31"),a("c69e")),At=a.n(Wt),It=(a("a769"),a("5cc3")),Mt=a.n(It),qt=(a("10cb"),a("f3ad")),Ut=a.n(qt),Jt=(a("fe07"),a("6ac5")),Kt=a.n(Jt),Qt=(a("3c52"),a("0d7b")),Ht=a.n(Qt),Yt=(a("8bd8"),a("4cb2")),Xt=a.n(Yt),Zt=(a("34db"),a("3803")),ea=a.n(Zt),ta=(a("ce18"),a("f58e")),aa=a.n(ta),ra=(a("4ca3"),a("443e")),na=a.n(ra),ia=(a("a673"),a("7b31")),la=a.n(ia),oa=(a("adec"),a("3d2d")),sa=a.n(oa),ca=(a("1951"),a("eedf")),da=a.n(ca),ua=(a("eca7"),a("3787")),pa=a.n(ua),ma=(a("425f"),a("4105")),fa=a.n(ma),ha=(a("a7cc"),a("df33")),ga=a.n(ha),_a=(a("fd71"),a("a447")),ba=a.n(_a),wa=(a("915d"),a("e04d")),va=a.n(wa),ya=(a("f4f9"),a("c2cc")),xa=a.n(ya),ka=(a("7a0f"),a("0f6c")),ja=a.n(ka),Sa=(a("4fdb"),a("b076")),Da=a.n(Sa),$a=(a("06f1"),a("6ac9")),Va=a.n($a),Ra=(a("e960"),a("b35b")),Ca=a.n(Ra),La=(a("b5d8"),a("f494")),Oa=a.n(La),Ea=(a("f92a"),a("d775")),Pa=a.n(Ea),Fa=(a("e612"),a("dd87")),Ta=a.n(Fa),Ba=(a("075a"),a("72aa")),za=a.n(Ba),Na=(a("672e"),a("101e")),Ga=a.n(Na),Wa=(a("cbb5"),a("8bbc")),Aa=a.n(Wa),Ia=(a("3db2"),a("58b8")),Ma=a.n(Ia),qa=(a("f225"),a("89a9")),Ua=a.n(qa),Ja=(a("0fb4"),a("9944")),Ka=a.n(Ja),Qa=(a("e2f3"),a("06f9")),Ha=a.n(Qa),Ya=(a("6b30"),a("c284")),Xa=a.n(Ya),Za=(a("9e1f"),a("6ed5")),er=a.n(Za),tr=(a("0fb7"),a("f529")),ar=a.n(tr);r["default"].prototype.$message=ar.a,r["default"].prototype.$confirm=er.a.confirm,r["default"].use(Xa.a),r["default"].use(Ha.a),r["default"].use(Ka.a),r["default"].use(Ua.a),r["default"].use(Ma.a),r["default"].use(Aa.a),r["default"].use(Ga.a),r["default"].use(za.a),r["default"].use(Ta.a),r["default"].use(Pa.a),r["default"].use(Oa.a),r["default"].use(Ca.a),r["default"].use(Va.a),r["default"].use(Da.a),r["default"].use(ja.a),r["default"].use(xa.a),r["default"].use(va.a),r["default"].use(ba.a),r["default"].use(ga.a),r["default"].use(fa.a),r["default"].use(pa.a),r["default"].use(da.a),r["default"].use(sa.a),r["default"].use(la.a),r["default"].use(na.a),r["default"].use(aa.a),r["default"].use(ea.a),r["default"].use(Xt.a),r["default"].use(Ht.a),r["default"].use(Kt.a),r["default"].use(Ut.a),r["default"].use(Mt.a),r["default"].use(At.a),r["default"].use(Gt.a),r["default"].use(zt.a),r["default"].use(Tt.a),r["default"].use(Da.a),r["default"].use(Pt.a),r["default"].use(Ot.a),r["default"].use(Ct.a),r["default"].use(Vt.a),r["default"].use(Dt.a),r["default"].use(jt.a);a("aede"),a("ed2c");var rr=a("98c9"),nr=a("bc3a"),ir=a.n(nr),lr=a("4328"),or=a.n(lr);a("9ca8e");ir.a.defaults.headers.post["Content-Type"]="application/json;",ir.a.interceptors.request.use((function(e){if("post"===e.method){var t=e.url.split("/")[e.url.split("/").length-2];return"upload"===t||(e.data=JSON.stringify(e.data)),e}return e}),(function(e){return Promise.reject(e)})),r["default"].use(rr["a"]),r["default"].config.productionTip=!1,r["default"].prototype.$http=ir.a,r["default"].prototype.$qs=or.a,ir.a.defaults.withCredentials=!0,ir.a.defaults.baseURL="http://39.100.48.36:3031/api/v1.0",new r["default"]({router:yt,render:function(e){return e(d)}}).$mount("#app")},"57bf":function(e,t,a){"use strict";a("de5e")},"6f58":function(e,t,a){e.exports=a.p+"img/cqu1.142f1f62.jpg"},7220:function(e,t,a){"use strict";a("b7a4")},7572:function(e,t,a){"use strict";a("7b70")},"76fc":function(e,t,a){},"7b70":function(e,t,a){},"82c3":function(e,t,a){"use strict";a("3976")},a1db:function(e,t,a){"use strict";a("ff1c")},aede:function(e,t,a){},b5a6:function(e,t,a){},b7a4:function(e,t,a){},d752:function(e,t,a){"use strict";a("d839")},d839:function(e,t,a){},de5e:function(e,t,a){},ed2c:function(e,t,a){},fc3c:function(e,t,a){"use strict";a("3ae1")},ff1c:function(e,t,a){}});
//# sourceMappingURL=app.1052b2d2.js.map